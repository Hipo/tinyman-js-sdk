"use strict";var t=require("algosdk"),e=require("base64-js"),n=Uint8Array.from([1]),r=1e5,s=1e5,a=1e5,o=1e5,i=1e5,u=5e4,c=28500,p=1e3,l=1e3;function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){T(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function m(){m=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},s="function"==typeof Symbol?Symbol:{},a=s.iterator||"@@iterator",o=s.asyncIterator||"@@asyncIterator",i=s.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,s){var a=e&&e.prototype instanceof d?e:d,o=Object.create(a.prototype),i=new b(s||[]);return r(o,"_invoke",{value:y(t,n,i)}),o}function p(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var l={};function d(){}function f(){}function g(){}var I={};u(I,a,(function(){return this}));var A=Object.getPrototypeOf,x=A&&A(A(E([])));x&&x!==e&&n.call(x,a)&&(I=x);var h=g.prototype=d.prototype=Object.create(I);function T(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function v(t,e){function s(r,a,o,i){var u=p(t[r],t,a);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){s("next",t,o,i)}),(function(t){s("throw",t,o,i)})):e.resolve(l).then((function(t){c.value=t,o(c)}),(function(t){return s("throw",t,o,i)}))}i(u.arg)}var a;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){s(t,n,e,r)}))}return a=a?a.then(r,r):r()}})}function y(t,e,n){var r="suspendedStart";return function(s,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===s)throw a;return S()}for(n.method=s,n.arg=a;;){var o=n.delegate;if(o){var i=_(o,n);if(i){if(i===l)continue;return i}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=p(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function _(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),l;var s=p(r,t.iterator,e.arg);if("throw"===s.type)return e.method="throw",e.arg=s.arg,e.delegate=null,l;var a=s.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function b(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function E(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,s=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return s.next=s}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=g,r(h,"constructor",{value:g,configurable:!0}),r(g,"constructor",{value:f,configurable:!0}),f.displayName=u(g,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,i,"GeneratorFunction")),t.prototype=Object.create(h),t},t.awrap=function(t){return{__await:t}},T(v.prototype),u(v.prototype,o,(function(){return this})),t.AsyncIterator=v,t.async=function(e,n,r,s,a){void 0===a&&(a=Promise);var o=new v(c(e,n,r,s),a);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},T(h),u(h,i,"Generator"),u(h,a,(function(){return this})),u(h,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=E,b.prototype={constructor:b,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(D),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return o.type="throw",o.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var s=this.tryEntries.length-1;s>=0;--s){var a=this.tryEntries[s],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var i=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(i&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(i){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var s=this.tryEntries[r];if(s.tryLoc<=this.prev&&n.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var a=s;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),D(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var s=r.arg;D(n)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}function g(t,e,n,r,s,a,o){try{var i=t[a](o),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(r,s)}function I(t){return function(){var e=this,n=arguments;return new Promise((function(r,s){var a=t.apply(e,n);function o(t){g(a,r,s,o,i,"next",t)}function i(t){g(a,r,s,o,i,"throw",t)}o(void 0)}))}}function A(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function x(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,F(r.key),r)}}function h(t,e,n){return e&&x(t.prototype,e),n&&x(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function T(t,e,n){return(e=F(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_(t,e)}function y(t){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},y(t)}function _(t,e){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_(t,e)}function w(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function D(t,e,n){return D=w()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);var s=new(Function.bind.apply(t,r));return n&&_(s,n.prototype),s},D.apply(null,arguments)}function b(t){var e="function"==typeof Map?new Map:void 0;return b=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return D(t,arguments,y(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),_(r,t)},b(t)}function E(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function S(t){var e=w();return function(){var n,r=y(t);if(e){var s=y(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return E(this,n)}}function O(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,s,a,o,i=[],u=!0,c=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(i.push(r.value),i.length!==e);u=!0);}catch(t){c=!0,s=t}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw s}}return i}}(t,e)||P(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(t){return function(t){if(Array.isArray(t))return k(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||P(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(t,e){if(t){if("string"==typeof t)return k(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(t,e):void 0}}function k(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function L(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=P(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,s=function(){};return{s:s,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,i=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){i=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(i)throw a}}}}function F(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}var B="- would result negative",R="logic eval error:",M="exceeds schema integer count",C=/transaction \w+:/,X=function(t){v(n,b(Error));var e=S(n);function n(t,r){var s;A(this,n);for(var a=arguments.length,o=new Array(a>2?a-2:0),i=2;i<a;i++)o[i-2]=arguments[i];var u=(s=e.call.apply(e,[this].concat(o))).extractMessageFromAlgoSDKError(t);return s.data=t,s.type=s.getErrorType(u),s.setMessage(s.getErrorMessage(u,s.type,r)),s}return h(n,[{key:"setMessage",value:function(t){this.message=t}},{key:"getErrorType",value:function(t){var e="Unknown";return t.includes(B)?e="SlippageTolerance":t.includes(M)?e="ExceedingExcessAmountCount":t.includes(R)?e="LogicError":t.match(C)&&(e="TransactionError"),e}},{key:"getErrorMessage",value:function(t,e,n){var r;switch(e){case"SlippageTolerance":r="The process failed due to too much slippage in the price. Please adjust the slippage tolerance and try again.";break;case"ExceedingExcessAmountCount":r="The process failed due to the number of excess amounts accumulated for your account in the Tinyman app.";break;case"LogicError":r=t.split(R)[1];break;case"TransactionError":r=t.split(C)[1];break;case"Unknown":t&&(r=t)}return r||(r=n||"We encountered an unexpected error, try again later."),r.trim()}},{key:"extractMessageFromAlgoSDKError",value:function(t){var e,n,r,s="";return null!=t&&null!==(e=t.response)&&void 0!==e&&null!==(n=e.body)&&void 0!==n&&n.message?s=t.response.body.message:null!=t&&null!==(r=t.response)&&void 0!==r&&r.text?s=t.response.text:"string"==typeof(null==t?void 0:t.message)&&(s=this.isMessageObjectString(null==t?void 0:t.message)?JSON.parse(t.message||"{message: ''}").message:t.message),"string"!=typeof s&&(s=String(s)),s}},{key:"isMessageObjectString",value:function(t){return"string"==typeof t&&t.includes("{message:")}}]),n}();function j(t){var e,n=t.stateArray,r=void 0===n?[]:n,s=t.shouldDecodeKeys,a=void 0!==s&&s,o={},i=L(r);try{for(i.s();!(e=i.n()).done;){var u=e.value,c=u.key,p=void 0;if(1==u.value.type)p=u.value.bytes;else{if(2!=u.value.type)throw new Error("Unexpected state type: ".concat(u.value.type));p=u.value.uint}o[a?atob(c):c]=p}}catch(t){i.e(t)}finally{i.f()}return o}function V(t){var e,n=t.reduce((function(t,e){return t+e.length}),0),r=new Uint8Array(n),s=0,a=L(t);try{for(a.s();!(e=a.n()).done;){var o=e.value;r.set(o,s),s+=o.length}}catch(t){a.e(t)}finally{a.f()}return r}var Q=100000n,U=100000n,G=100000n,W=25000n+25000n,q=25000n+3500n;function z(t){var e=t["apps-total-schema"],n=0n,r=0n;e&&(e["num-byte-slice"]&&(n=e["num-byte-slice"]),e["num-uint"]&&(r=e["num-uint"]));var s=t["apps-local-state"]||[],a=t["created-apps"]||[],o=t.assets||[];return Q+U*BigInt(o.length)+G*BigInt(a.length+s.length)+q*r+W*n}function J(t){return new Promise((function(e){setTimeout((function(){e(null)}),t)}))}function Y(t,e){return K.apply(this,arguments)}function K(){return(K=I(m().mark((function t(e,n){var r;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,J(1e3);case 3:return r=null,t.prev=4,t.next=7,e.pendingTransactionInformation(n).do();case 7:r=t.sent,t.next=12;break;case 10:t.prev=10,t.t0=t.catch(4);case 12:if(!r){t.next=17;break}if(!r["confirmed-round"]){t.next=15;break}return t.abrupt("return",r);case 15:if(!r["pool-error"]){t.next=17;break}throw new Error("Transaction Rejected: ".concat(r["pool-error"]));case 17:t.next=0;break;case 19:case"end":return t.stop()}}),t,null,[[4,10]])})))).apply(this,arguments)}function H(t,e,n){if(e>1||e<0)throw new Error("Invalid slippage value. Must be between 0 and 1, got ".concat(e));var r;try{var s="negative"===t?1-e:1+e;r=BigInt(Math.floor(Number(n)*s))}catch(t){throw new Error(t.message)}return r}function Z(t,e){var n=Number(t);return tt({decimalPlaces:n},Math.pow(10,-n)*Number(e))}function $(t,e){return tt({decimalPlaces:0},Math.pow(10,Number(t))*Number(e))}function tt(t,e){var n=t.decimalPlaces,r=void 0===n?0:n;if(r>0){var s=O(nt(e),2),a=s[0],o=s[1],i=O(nt(Math.round(Number(et(a,o+r)))),2),u=i[0],c=i[1];return Number(et(u,c-r))}return Math.round(e)}function et(t,e){return t+(e<0?"e".concat(e):"e+".concat(e))}function nt(t){if(t.toString().includes("e")){var e=t.toString().split("e");return[parseFloat(e[0]),parseFloat(e[1])]}return[t,0]}function rt(t,e){return st.apply(this,arguments)}function st(){return(st=I(m().mark((function t(e,n){var r,s,a,o,i,u,c,p;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,r=[],s=L(n),t.prev=3,s.s();case 5:if((a=s.n()).done){t.next=18;break}return o=a.value,t.next=9,e.sendRawTransaction(o).do();case 9:return i=t.sent,u=i.txId,t.next=13,Y(e,u);case 13:c=t.sent,p=c["confirmed-round"],r.push({confirmedRound:p,txnID:u});case 16:t.next=5;break;case 18:t.next=23;break;case 20:t.prev=20,t.t0=t.catch(3),s.e(t.t0);case 23:return t.prev=23,s.f(),t.finish(23);case 26:return t.abrupt("return",r);case 29:throw t.prev=29,t.t1=t.catch(0),new X(t.t1,"We encountered an error while processing this transaction. Try again later.");case 32:case"end":return t.stop()}}),t,null,[[0,29],[3,20,23,26]])})))).apply(this,arguments)}function at(t){return t.reduce((function(t,e){return t+e.txn.fee}),0)}function ot(t){return(e=t[0].txn.group)?Buffer.from(e).toString("base64"):"";var e}function it(t){for(var e=[];;){var n=127&t;if(!(t>>=7)){e.push(n);break}e.push(128|n)}return e}function ut(t){return(new TextEncoder).encode(t)}var ct=0,pt={id:"".concat(ct),name:"Algorand",unit_name:"ALGO",decimals:6,url:"https://algorand.org",is_liquidity_token:!1,total_amount:"6615503326932151",clawback_address:""},lt={V1:"TM1POOL",V1_1:"TMPOOL11",V2:"TMPOOL2"};function dt(){return(dt=I(m().mark((function e(n){var r,s,a,o,i;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.client,s=n.assetID,a=n.initiatorAddr,e.prev=1,e.next=4,r.getTransactionParams().do();case 4:return o=e.sent,i=t.makeAssetTransferTxnWithSuggestedParamsFromObject({from:a,to:a,assetIndex:s,amount:0,suggestedParams:o}),e.abrupt("return",[{txn:i,signers:[a]}]);case 9:throw e.prev=9,e.t0=e.catch(1),new X(e.t0,"We encountered something unexpected while opting into this asset. Try again later.");case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function ft(t,e){var n=Number(t.id),r=Number(e.id);return n>r?[f(f({},t),{},{id:n}),f(f({},e),{},{id:r})]:[f(f({},e),{},{id:r}),f(f({},t),{},{id:n})]}function mt(t,e){var n=[t,e];return[Math.max.apply(Math,n),Math.min.apply(Math,n)]}function gt(t){return Number(t)===ct}var It,At={V1_1:"v1_1",V2:"v2"},xt={type:"logicsig",logic:{bytecode:"BCAIAQCBgICAgICAgPABgICAgICAgIDwAQMEBQYlJA1EMQkyAxJEMRUyAxJEMSAyAxJEMgQiDUQzAQAxABJEMwEQIQcSRDMBGIGCgICAgICAgPABEkQzARkiEjMBGyEEEhA3ARoAgAlib290c3RyYXASEEAAXDMBGSMSRDMBG4ECEjcBGgCABHN3YXASEEACOzMBGyISRDcBGgCABG1pbnQSQAE7NwEaAIAEYnVybhJAAZg3ARoAgAZyZWRlZW0SQAJbNwEaAIAEZmVlcxJAAnkAIQYhBSQjEk0yBBJENwEaARclEjcBGgIXJBIQRDMCADEAEkQzAhAhBBJEMwIhIxJEMwIiIxwSRDMCIyEHEkQzAiQjEkQzAiWACFRNUE9PTDExEkQzAiZRAA+AD1RpbnltYW5Qb29sMS4xIBJEMwIngBNodHRwczovL3RpbnltYW4ub3JnEkQzAikyAxJEMwIqMgMSRDMCKzIDEkQzAiwyAxJEMwMAMQASRDMDECEFEkQzAxElEkQzAxQxABJEMwMSIxJEJCMTQAAQMwEBMwIBCDMDAQg1AUIBsTMEADEAEkQzBBAhBRJEMwQRJBJEMwQUMQASRDMEEiMSRDMBATMCAQgzAwEIMwQBCDUBQgF8MgQhBhJENwEcATEAE0Q3ARwBMwQUEkQzAgAxABNEMwIUMQASRDMDADMCABJEMwIRJRJEMwMUMwMHMwMQIhJNMQASRDMDESMzAxAiEk0kEkQzBAAxABJEMwQUMwIAEkQzAQEzBAEINQFCAREyBCEGEkQ3ARwBMQATRDcBHAEzAhQSRDMDFDMDBzMDECISTTcBHAESRDMCADEAEkQzAhQzBAASRDMCESUSRDMDADEAEkQzAxQzAwczAxAiEk0zBAASRDMDESMzAxAiEk0kEkQzBAAxABNEMwQUMQASRDMBATMCAQgzAwEINQFCAJAyBCEFEkQ3ARwBMQATRDMCADcBHAESRDMCADEAE0QzAwAxABJEMwIUMwIHMwIQIhJNMQASRDMDFDMDBzMDECISTTMCABJEMwEBMwMBCDUBQgA+MgQhBBJENwEcATEAE0QzAhQzAgczAhAiEk03ARwBEkQzAQEzAgEINQFCABIyBCEEEkQzAQEzAgEINQFCAAAzAAAxABNEMwAHMQASRDMACDQBD0M=",address:"ABUKAXTANWR6K6ZYV75DWJEPVWWOU6SFUVRI6QHO44E4SIDLHBTD2CZ64A",size:881,variables:[{name:"TMPL_ASSET_ID_1",type:"int",index:15,length:10},{name:"TMPL_ASSET_ID_2",type:"int",index:5,length:10},{name:"TMPL_VALIDATOR_APP_ID",type:"int",index:74,length:10}],source:"https://github.com/tinymanorg/tinyman-contracts-v1/tree/dc9ab40c58b85c15d58f63a1507e18be76720dbb/contracts/pool_logicsig.teal.tmpl"},name:"pool_logicsig"},ht={type:"app",global_state_schema:{num_uints:0,num_byte_slices:0},local_state_schema:{num_uints:16,num_byte_slices:0},name:"validator_app"},Tt=new(function(){function t(){A(this,t),this.clientName="tinyman-js-sdk"}return h(t,[{key:"getClientName",value:function(){return this.clientName}},{key:"setClientName",value:function(t){this.clientName=t}},{key:"getAppCallTxnNoteWithClientName",value:function(t){var e=t===At.V1_1?"v1":t;return ut("tinyman/".concat(e,':j{"origin":"').concat(this.clientName,'"}'))}}]),t}()),vt=(T(It={},At.V1_1,{testnet:62368684,mainnet:552635992}),T(It,At.V2,{testnet:148607e3,mainnet:1002541853}),It);function yt(t,e){var n=vt[e][t];if(!n)throw new Error("No Validator App exists for ".concat(t," network with ").concat(e," contract version"));return n}function _t(){return(_t=I(m().mark((function e(n){var r,s,a,o,i,u;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.client,s=n.network,a=n.contractVersion,o=n.initiatorAddr,e.next=3,r.getTransactionParams().do();case 3:return i=e.sent,u=t.makeApplicationOptInTxnFromObject({from:o,appIndex:yt(s,a),note:Tt.getAppCallTxnNoteWithClientName(a),suggestedParams:i}),e.abrupt("return",[{txn:u,signers:[o]}]);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wt(){return(wt=I(m().mark((function e(n){var r,s,a,o,i,u;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.client,s=n.network,a=n.contractVersion,o=n.initiatorAddr,e.next=3,r.getTransactionParams().do();case 3:return i=e.sent,u=t.makeApplicationClearStateTxnFromObject({from:o,appIndex:yt(s,a),note:Tt.getAppCallTxnNoteWithClientName(a),suggestedParams:i}),e.abrupt("return",[{txn:u,signers:[o]}]);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Dt=h((function t(e){A(this,t),this.schema={numLocalInts:e.local_state_schema.num_uints,numLocalByteSlices:e.local_state_schema.num_byte_slices,numGlobalInts:e.global_state_schema.num_uints,numGlobalByteSlices:e.global_state_schema.num_byte_slices}})),bt=new(function(n){v(s,Dt);var r=S(s);function s(t,e){var n;return A(this,s),(n=r.call(this,t)).poolLogicSigContractTemplate=e.logic.bytecode,n.templateVariables=e.logic.variables,n}return h(s,[{key:"generateLogicSigAccountForPool",value:function(n){if(n.asset1ID===n.asset2ID)throw new Error("Assets are the same");var r=yt(n.network,At.V1_1),s=O(mt(n.asset1ID,n.asset2ID),2),a=s[0],o=s[1],i=Array.from(e.toByteArray(this.poolLogicSigContractTemplate)),u={asset_id_1:a,asset_id_2:o,validator_app_id:r},c=0;this.templateVariables.sort((function(t,e){return t.index-e.index}));for(var p=0;p<this.templateVariables.length;p++){var l=this.templateVariables[p],d=u[l.name.split("TMPL_")[1].toLowerCase()],f=l.index-c,m=f+l.length,g=it(d);c+=l.length-g.length,i=i.slice(0,f).concat(g).concat(i.slice(m))}var I=new Uint8Array(i);return new t.LogicSigAccount(I)}}]),s}())(ht,xt),Et={type:"logicsig",logic:{bytecode:"BoAYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgQBbNQA0ADEYEkQxGYEBEkSBAUM="},name:"pool_logicsig"},St={type:"app",global_state_schema:{num_uints:0,num_byte_slices:3},local_state_schema:{num_uints:12,num_byte_slices:2},name:"validator_app"},Ot=new(function(e){v(r,Dt);var n=S(r);function r(t,e){var s;return A(this,r),(s=n.call(this,t)).poolLogicSigContractTemplate=e.logic.bytecode,s}return h(r,[{key:"generateLogicSigAccountForPool",value:function(e){if(e.asset1ID===e.asset2ID)throw new Error("Assets are the same");var n=yt(e.network,At.V2),r=O(mt(e.asset1ID,e.asset2ID),2),s=r[0],a=r[1],o={bytes:Array.from(Buffer.from(this.poolLogicSigContractTemplate,"base64")),validatorAppId:Array.from(t.encodeUint64(n)),asset1ID:Array.from(t.encodeUint64(s)),asset2ID:Array.from(t.encodeUint64(a))},i=[].concat(N(o.bytes.slice(0,3)),N(o.validatorAppId.slice(0,8)),N(o.asset1ID.slice(0,8)),N(o.asset2ID.slice(0,8)),N(o.bytes.slice(27)));return new t.LogicSigAccount(new Uint8Array(i))}}]),r}())(St,Et);function Nt(t){return function(t){return t===At.V2}(t)?Ot:bt}function Pt(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.IntDecoding.DEFAULT;return new Promise(function(){var t=I(m().mark((function t(s,a){var o;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.accountInformation(n).setIntDecoding(r).do();case 3:o=t.sent,s(f(f({},o),{},{minimum_required_balance:Lt(o)})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a(new Error(t.t0.message||"Failed to fetch account information"));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n){return t.apply(this,arguments)}}())}function kt(t,e){var n=t["apps-local-state"].find((function(t){return t.id===e}));return n?j({stateArray:n["key-value"],shouldDecodeKeys:!0}):null}function Lt(t){var e=t["apps-total-schema"];return r+s*(t.assets||[]).length+o*(t["created-apps"]||[]).length+a*(t["apps-local-state"]||[]).length+u*Number(e&&e["num-byte-slice"]||0)+c*Number(e&&e["num-uint"]||0)+i*(t["apps-total-extra-pages"]||0)}var Ft=ut("e");function Bt(t){return Rt.apply(this,arguments)}function Rt(){return(Rt=I(m().mark((function n(r){var s,a,o,i,u,c,p,l,d,f,g,I,A,x,h,T,v,y,_,w,D;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=r.client,a=r.pool,o=r.accountAddr,n.next=3,s.accountInformation(o).setIntDecoding(t.IntDecoding.BIGINT).do();case 3:i=n.sent,u=i["apps-local-state"]||[],c=0n,p=0n,l=0n,d=a.account.address(),f=L(u),n.prev=10,f.s();case 12:if((g=f.n()).done){n.next=31;break}if((I=g.value).id==a.validatorAppID){n.next=16;break}return n.abrupt("continue",29);case 16:if(A=I["key-value"]){n.next=19;break}return n.abrupt("break",31);case 19:x=j({stateArray:A}),h=e.fromByteArray(V([t.decodeAddress(d).publicKey,Ft,t.encodeUint64(a.asset1ID)])),T=e.fromByteArray(V([t.decodeAddress(d).publicKey,Ft,t.encodeUint64(a.asset2ID)])),v=e.fromByteArray(V([t.decodeAddress(d).publicKey,Ft,t.encodeUint64(a.poolTokenID)])),y=x[h],_=x[T],w=x[v],"bigint"==typeof y&&(c=y),"bigint"==typeof _&&(p=_),"bigint"==typeof w&&(l=w);case 29:n.next=12;break;case 31:n.next=36;break;case 33:n.prev=33,n.t0=n.catch(10),f.e(n.t0);case 36:return n.prev=36,f.f(),n.finish(36);case 39:if(!((D={excessAsset1:c,excessAsset2:p,excessPoolTokens:l}).excessAsset1<0n||D.excessAsset2<0n||D.excessPoolTokens<0n)){n.next=42;break}throw new Error("Invalid account excess: ".concat(D));case 42:return n.abrupt("return",D);case 43:case"end":return n.stop()}}),n,null,[[10,33,36,39]])})))).apply(this,arguments)}function Mt(){return(Mt=I(m().mark((function n(r){var s,a,o,i,u,c,p,l,d,f,g,I,A,x,h;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=r.client,a=r.accountAddr,o=r.validatorAppID,n.next=3,s.accountInformation(a).setIntDecoding(t.IntDecoding.BIGINT).do();case 3:if(i=n.sent,u=i["apps-local-state"]||[],c=u.find((function(t){return t.id==o})),p=[],c&&c["key-value"])for(l=j({stateArray:c["key-value"]}),d=0,f=Object.entries(l);d<f.length;d++)g=f[d],I=O(g,2),A=I[0],x=I[1],41===(h=e.toByteArray(A)).length&&101===h[32]&&p.push({poolAddress:t.encodeAddress(h.slice(0,32)),assetID:t.decodeUint64(h.slice(33,41),"safe"),amount:parseInt(x)});return n.abrupt("return",p);case 9:case"end":return n.stop()}}),n)})))).apply(this,arguments)}var Ct,Xt=function(t){return t.NOT_CREATED="not created",t.BOOTSTRAP="bootstrap",t.READY="ready",t.ERROR="error",t}({}),jt=(T(Ct={},At.V1_1,{asset1:"a1",asset2:"a2"}),T(Ct,At.V2,{asset1:"asset_1_id",asset2:"asset_2_id",poolTokenID:"pool_token_asset_id",issuedPoolTokens:"issued_pool_tokens",asset1Reserves:"asset_1_reserves",asset2Reserves:"asset_2_reserves",asset1ProtocolFees:"asset_1_protocol_fees",asset2ProtocolFees:"asset_2_protocol_fees",totalFeeShare:"total_fee_share",protocolFeeRatio:"protocol_fee_ratio",cumulativePriceUpdateTimeStamp:"cumulative_price_update_timestamp"}),Ct),Vt=1e3,Qt=ut("o"),Ut=0xffffffffffffffffn;function Gt(t){return Wt.apply(this,arguments)}function Wt(){return(Wt=I(m().mark((function t(e){var n,r,s,a,o,i,u,c,p,l,d,f,g,I;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.client,s=e.network,a=e.asset1ID,o=e.asset2ID,i=Nt(At.V1_1),u=i.generateLogicSigAccountForPool(e),c=yt(s,At.V1_1),p=u.address(),l=mt(a,o),t.next=8,Pt(r,p);case 8:return d=t.sent,f=kt(d,c),g=null===(n=d["created-assets"][0])||void 0===n?void 0:n.index,I={account:u,validatorAppID:c,asset1ID:l[0],asset2ID:l[1],status:f||g?Xt.READY:Xt.NOT_CREATED,contractVersion:At.V1_1,poolTokenID:g},f&&(I.asset1ID=f[jt.v1_1.asset1],I.asset2ID=f[jt.v1_1.asset2]),t.abrupt("return",I);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function qt(){return(qt=I(m().mark((function n(r,s){var a,o,i,u,c,p,l,d,f,g,I,A,x,h,T,v,y,_,w,D,b,E,S,O,N,P;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Pt(r,s.account.address(),t.IntDecoding.BIGINT);case 2:a=n.sent,o=a["apps-local-state"]||[],i=0n,u=0n,c=0n,p=L(o),n.prev=8,p.s();case 10:if((l=p.n()).done){n.next=29;break}if((d=l.value).id==s.validatorAppID){n.next=14;break}return n.abrupt("continue",27);case 14:if(f=d["key-value"]){n.next=17;break}return n.abrupt("break",29);case 17:g=j({stateArray:f}),I=e.fromByteArray(V([Qt,t.encodeUint64(s.asset1ID)])),A=e.fromByteArray(V([Qt,t.encodeUint64(s.asset2ID)])),x=e.fromByteArray(V([Qt,t.encodeUint64(s.poolTokenID)])),h=g[I],T=g[A],v=g[x],"bigint"==typeof h&&(i=h),"bigint"==typeof T&&(u=T),"bigint"==typeof v&&(c=v);case 27:n.next=10;break;case 29:n.next=34;break;case 31:n.prev=31,n.t0=n.catch(8),p.e(n.t0);case 34:return n.prev=34,p.f(),n.finish(34);case 37:y=0n,_=0n,w=0n,D=L(a.assets);try{for(D.s();!(b=D.n()).done;)E=b.value,S=E["asset-id"],O=E.amount,S==s.asset1ID?y=BigInt(O):S==s.asset2ID?_=BigInt(O):S==s.poolTokenID&&(w=BigInt(O))}catch(t){D.e(t)}finally{D.f()}if(0===s.asset2ID&&(N=z(a),_=BigInt(a.amount)-N),!((P={asset1:y-i,asset2:_-u,issuedLiquidity:Ut-w+c,round:a.round}).asset1<0n||P.asset2<0n)){n.next=46;break}throw new Error("The pool reserves are below zero. The manager of one of the assets has used clawback to remove assets from this pool. Do not interact with the pool.");case 46:if(!(P.issuedLiquidity<0n||P.issuedLiquidity>Ut)){n.next=48;break}throw new Error("Issued liquidity value is out of the expected range ([0n, ".concat(Ut,"]): ").concat(P.issuedLiquidity));case 48:return n.abrupt("return",P);case 49:case"end":return n.stop()}}),n,null,[[8,31,34,37]])})))).apply(this,arguments)}function zt(){return zt=I(m().mark((function t(e){var n,r,s,a,o,i,u,c,p,l=arguments;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.client,r=e.address,s=e.network,!(a=l.length>1&&void 0!==l[1]?l[1]:{})[r]){t.next=4;break}return t.abrupt("return",a[r]);case 4:return t.next=6,Pt(n,r);case 6:return o=t.sent,i=kt(o,yt(s,At.V1_1)),u=null,i&&(p=o["created-assets"][0],c=p.index,u={asset1ID:i[jt[At.V1_1].asset1],asset2ID:i[jt[At.V1_1].asset2],poolTokenID:c},a[r]=u),t.abrupt("return",u);case 11:case"end":return t.stop()}}),t)}))),zt.apply(this,arguments)}var Jt=Object.freeze({__proto__:null,getPoolAssets:function(t){return zt.apply(this,arguments)},getPoolInfo:Gt,getPoolReserves:function(t,e){return qt.apply(this,arguments)}});function Yt(t){return Kt.apply(this,arguments)}function Kt(){return(Kt=I(m().mark((function t(e){var n,r,s,a,o,i,u,c,p,l,d,f;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.client,r=e.network,s=e.asset1ID,a=e.asset2ID,o=Nt(At.V2),i=o.generateLogicSigAccountForPool(e),u=yt(r,At.V2),c=i.address(),p=mt(s,a),t.next=8,Pt(n,c);case 8:return l=t.sent,d=kt(l,u),f={account:i,validatorAppID:u,asset1ID:p[0],asset2ID:p[1],status:d?Xt.READY:Xt.NOT_CREATED,contractVersion:At.V2},d&&(f.asset1ProtocolFees=BigInt(d[jt.v2.asset1ProtocolFees]),f.asset2ProtocolFees=BigInt(d[jt.v2.asset2ProtocolFees]),f.asset1Reserves=BigInt(d[jt.v2.asset1Reserves]),f.asset2Reserves=BigInt(d[jt.v2.asset2Reserves]),f.issuedPoolTokens=BigInt(d[jt.v2.issuedPoolTokens]),f.cumulativePriceUpdateTimeStamp=Number(d[jt.v2.cumulativePriceUpdateTimeStamp]),f.protocolFeeRatio=Number(d[jt.v2.protocolFeeRatio]),f.totalFeeShare=BigInt(d[jt.v2.totalFeeShare]),f.poolTokenID=Number(d[jt.v2.poolTokenID]),f.asset1ID=Number(d[jt.v2.asset1]),f.asset2ID=Number(d[jt.v2.asset2])),t.abrupt("return",f);case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ht(){return(Ht=I(m().mark((function t(e,n){var r,s,a;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Pt(e,n.account.address());case 2:return r=t.sent,s=kt(r,n.validatorAppID),a={asset1:0n,asset2:0n,issuedLiquidity:0n,round:r.round},s&&(a.asset1=BigInt(s[jt.v2.asset1Reserves]),a.asset2=BigInt(s[jt.v2.asset2Reserves]),a.issuedLiquidity=BigInt(s[jt.v2.issuedPoolTokens])),t.abrupt("return",a);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Zt(){return(Zt=I(m().mark((function t(e){var n,r,s,a,o,i;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.client,r=e.address,s=e.network,t.next=3,Pt(n,r);case 3:return a=t.sent,o=kt(a,yt(s,At.V2)),i=null,o&&(i={asset1ID:o[jt[At.V2].asset1],asset2ID:o[jt[At.V2].asset2],poolTokenID:o[jt[At.V2].poolTokenID]}),t.abrupt("return",i);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var $t=Object.freeze({__proto__:null,getPoolAssets:function(t){return Zt.apply(this,arguments)},getPoolInfo:Yt,getPoolReserves:function(t,e){return Ht.apply(this,arguments)}});function te(t){return Boolean(t&&!(t.asset1+t.asset2))}var ee,ne=Object.freeze({__proto__:null,getPoolPairRatio:function(t,e){var n=te(e),r=null;return e&&!n&&e.asset1&&e.asset2&&"number"==typeof t.asset2&&"number"==typeof t.asset1&&(r=Z(t.asset1,e.asset1)/Z(t.asset2,e.asset2)),r},getPoolShare:function(t,e){var n=Number(e)/Number(t);return Number.isFinite(n)||(n=0),n},getPoolsForPair:function(t){return Promise.all([Gt(t),Yt(t)])},isPoolEmpty:te,isPoolNotCreated:function(t){return(null==t?void 0:t.status)===Xt.NOT_CREATED},isPoolReady:function(t){return(null==t?void 0:t.status)===Xt.READY}}),re=f((T(ee={},At.V1_1,f(f({},Jt),ne)),T(ee,At.V2,f(f({},$t),ne)),ee),ne),se=function(t){return t[t.FUNDING_TXN=0]="FUNDING_TXN",t[t.VALIDATOR_APP_CALL=1]="VALIDATOR_APP_CALL",t[t.POOL_TOKEN_CREATE=2]="POOL_TOKEN_CREATE",t[t.ASSET1_OPT_IN=3]="ASSET1_OPT_IN",t[t.ASSET2_OPT_IN=4]="ASSET2_OPT_IN",t}({}),ae={ASA_ALGO:96e4,ASA_ASA:859e3};function oe(){return(oe=I(m().mark((function e(n){var r,s,a,o,i,u,c,p,l,d,f,g,I,A,x,h,T,v,y,_,w,D,b,E,S;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.client,s=n.network,a=n.asset_1,o=n.asset_2,i=n.initiatorAddr,e.next=3,r.getTransactionParams().do();case 3:return u=e.sent,c=ft(a,o),p=O(c,2),l=p[0],d=l.id,f=l.unit_name,g=p[1],I=g.id,A=g.unit_name,x=gt(I),h=yt(s,At.V1_1),T=bt.generateLogicSigAccountForPool({network:s,asset1ID:d,asset2ID:I}),v=T.address(),y=t.makeApplicationOptInTxnFromObject({from:v,appIndex:h,note:Tt.getAppCallTxnNoteWithClientName(At.V1_1),appArgs:[ut("bootstrap"),t.encodeUint64(d),t.encodeUint64(I)],foreignAssets:x?[d]:[I],suggestedParams:u}),_=t.makeAssetCreateTxnWithSuggestedParamsFromObject({from:v,total:0xffffffffffffffffn,decimals:6,defaultFrozen:!1,unitName:lt.V1_1,assetName:"TinymanPool1.1 ".concat(f,"-").concat(A),assetURL:"https://tinyman.org",suggestedParams:u}),w=t.makeAssetTransferTxnWithSuggestedParamsFromObject({from:v,to:v,assetIndex:d,amount:0,suggestedParams:u}),D=t.makePaymentTxnWithSuggestedParamsFromObject({from:i,to:v,amount:ie(x),suggestedParams:u}),(b=[])[se.FUNDING_TXN]=D,b[se.VALIDATOR_APP_CALL]=y,b[se.POOL_TOKEN_CREATE]=_,b[se.ASSET1_OPT_IN]=w,x||(b[se.ASSET2_OPT_IN]=t.makeAssetTransferTxnWithSuggestedParamsFromObject({from:v,to:v,assetIndex:I,amount:0,suggestedParams:u})),E=t.assignGroupID(b),S=[{txn:E[se.FUNDING_TXN],signers:[i]},{txn:E[se.VALIDATOR_APP_CALL],signers:[v]},{txn:E[se.POOL_TOKEN_CREATE],signers:[v]},{txn:E[se.ASSET1_OPT_IN],signers:[v]}],E[se.ASSET2_OPT_IN]&&S.push({txn:E[se.ASSET2_OPT_IN],signers:[v]}),e.abrupt("return",S);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(t){return t?ae.ASA_ALGO:ae.ASA_ASA}function ue(){return(ue=I(m().mark((function e(n){var r,s,a,o,i,u,c,p,l,d,f,g,I,A,x;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.txGroup,s=n.network,a=n.initiatorSigner,o=n.asset1ID,i=n.asset2ID,e.next=3,a([r]);case 3:return u=e.sent,c=O(u,1),p=c[0],l=mt(o,i),d=O(l,2),f=d[0],g=d[1],I=bt.generateLogicSigAccountForPool({network:s,asset1ID:f,asset2ID:g}),A=[],x=r.map((function(e,n){if(n===se.FUNDING_TXN)return A.push(e.txn.txID().toString()),p;var r=t.signLogicSigTransactionObject(e.txn,I),s=r.txID,a=r.blob;return A.push(s),a})),e.abrupt("return",{signedTxns:x,txnIDs:A});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(t){return pe.apply(this,arguments)}function pe(){return(pe=I(m().mark((function t(e){var n,r,s,a,o;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.client,r=e.signedTxns,s=e.txnIDs,t.prev=1,t.next=4,n.sendRawTransaction(r).do();case 4:return t.next=6,Y(n,s[se.POOL_TOKEN_CREATE]);case 6:if(a=t.sent,"number"==typeof(o=a["asset-index"])){t.next=10;break}throw new Error("Generated ID is not valid: got ".concat(o));case 10:return t.abrupt("return",{poolTokenID:o});case 13:throw t.prev=13,t.t0=t.catch(1),new X(t.t0,"We encountered something unexpected while bootstraping the pool. Try again later.");case 16:case"end":return t.stop()}}),t,null,[[1,13]])})))).apply(this,arguments)}function le(){return(le=I(m().mark((function t(e){var n,r,s,a,o,i,u;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.client,r=e.network,s=e.pool,a=s.asset1ID,o=s.asset2ID,i=e.signedTxns,u=e.txnIDs,t.next=3,ce({client:n,signedTxns:i,txnIDs:u});case 3:return t.abrupt("return",re.v1_1.getPoolInfo({client:n,network:r,asset1ID:a,asset2ID:o}));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var de={generateTxns:function(t){return oe.apply(this,arguments)},signTxns:function(t){return ue.apply(this,arguments)},execute:function(t){return le.apply(this,arguments)},getBootstrapFundingTxnAmount:ie};var fe=function(t){return t[t.FUNDING_TXN=0]="FUNDING_TXN",t[t.VALIDATOR_APP_CALL=1]="VALIDATOR_APP_CALL",t}({}),me={ASA_ALGO:5,ASA_ASA:6};function ge(t,e){return Ie.apply(this,arguments)}function Ie(){return(Ie=I(m().mark((function e(n,r){var s,a,o;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=null===(s=r.find((function(t){return"appl"===t.txn.type})))||void 0===s?void 0:s.txn.txID())){e.next=7;break}return e.next=4,t.waitForConfirmation(n,a,l);case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=void 0;case 8:return o=e.t0,e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ae(t,e){return xe.apply(this,arguments)}function xe(){return(xe=I(m().mark((function t(e,n){var r;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ge(e,n);case 2:return r=t.sent,t.abrupt("return",null==r?void 0:r["inner-txns"]);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function he(){return(he=I(m().mark((function e(n){var r,s,a,o,i,u,c,p,l,d,f,g,I,A,x,h,T,v,y,_;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.client,s=n.network,a=n.asset_1,o=n.asset_2,i=n.initiatorAddr,e.next=3,r.getTransactionParams().do();case 3:return u=e.sent,c=yt(s,At.V2),p=t.getApplicationAddress(c),l=ft(a,o),d=O(l,2),f=d[0].id,g=d[1].id,e.next=9,re.v2.getPoolInfo({client:r,network:s,asset1ID:f,asset2ID:g});case 9:if(e.sent.status!==Xt.READY){e.next=12;break}throw new Error("Pool for ".concat(a.unit_name,"-").concat(o.unit_name," already exists"));case 12:return I=Ot.generateLogicSigAccountForPool({network:s,asset1ID:f,asset2ID:g}),A=I.address(),x=gt(g),(h=t.makeApplicationOptInTxnFromObject({from:A,appIndex:c,appArgs:[ut("bootstrap")],note:Tt.getAppCallTxnNoteWithClientName(At.V2),foreignAssets:[f,g],rekeyTo:p,suggestedParams:u})).fee=ve(x),T=t.makePaymentTxnWithSuggestedParamsFromObject({from:i,to:A,amount:Te(x),suggestedParams:u}),(v=[])[fe.FUNDING_TXN]=T,v[fe.VALIDATOR_APP_CALL]=h,y=t.assignGroupID(v),(_=[])[fe.FUNDING_TXN]={txn:y[fe.FUNDING_TXN],signers:[i]},_[fe.VALIDATOR_APP_CALL]={txn:y[fe.VALIDATOR_APP_CALL],signers:[A]},e.abrupt("return",_);case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Te(t){return function(t,e){var n=Nt(t).schema,o=n.numLocalInts,i=n.numLocalByteSlices,p=r+s+s+a+c*o+u*i;return e||(p+=s),p}(At.V2,t)+ve(t)+s}function ve(e){return((e?me.ASA_ALGO:me.ASA_ASA)+1)*t.ALGORAND_MIN_TX_FEE}function ye(){return(ye=I(m().mark((function e(n){var r,s,a,o,i,u,c,p,l,d,f,g,I,A,x;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.txGroup,s=n.network,a=n.initiatorSigner,o=n.asset1ID,i=n.asset2ID,e.next=3,a([r]);case 3:return u=e.sent,c=O(u,1),p=c[0],l=mt(o,i),d=O(l,2),f=d[0],g=d[1],I=Ot.generateLogicSigAccountForPool({network:s,asset1ID:f,asset2ID:g}),A=[],x=r.map((function(e,n){if(n===fe.FUNDING_TXN)return A.push(e.txn.txID().toString()),p;var r=t.signLogicSigTransactionObject(e.txn,I),s=r.txID,a=r.blob;return A.push(s),a})),e.abrupt("return",{signedTxns:x,txnIDs:A});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _e(){return(_e=I(m().mark((function t(e){var n,r,s,a,o,i,u,c,p,l,d;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.client,r=e.network,s=e.pool,a=s.asset1ID,o=s.asset2ID,i=e.txGroup,u=e.signedTxns,t.prev=1,t.next=4,n.sendRawTransaction(u).do();case 4:return t.next=6,ge(n,i);case 6:if(t.t1=c=t.sent,t.t0=null===t.t1,t.t0){t.next=10;break}t.t0=void 0===c;case 10:if(!t.t0){t.next=14;break}t.t2=void 0,t.next=15;break;case 14:t.t2=null===(p=c["local-state-delta"][0].delta)||void 0===p||null===(l=p.find((function(t){return t.key===btoa(jt.v2.poolTokenID)})))||void 0===l?void 0:l.value.uint;case 15:if("number"==typeof(d=t.t2)){t.next=18;break}throw new Error("Generated ID is not valid: got ".concat(d));case 18:return t.abrupt("return",re.v2.getPoolInfo({client:n,network:r,asset1ID:a,asset2ID:o}));case 21:throw t.prev=21,t.t3=t.catch(1),new X(t.t3,"We encountered something unexpected while bootstraping the pool. Try again later.");case 24:case"end":return t.stop()}}),t,null,[[1,21]])})))).apply(this,arguments)}var we,De={generateTxns:function(t){return he.apply(this,arguments)},signTxns:function(t){return ye.apply(this,arguments)},execute:function(t){return _e.apply(this,arguments)},getBootstrapFundingTxnAmount:Te,getTotalCost:function(e){return t.ALGORAND_MIN_TX_FEE+Te(e)}};var be,Ee,Se,Oe,Ne=(T(we={},At.V1_1,de),T(we,At.V2,De),T(we,"generateTxns",(function(t){return t.contractVersion===At.V1_1?de.generateTxns(t):De.generateTxns(t)})),T(we,"signTxns",(function(t){return t.contractVersion===At.V1_1?de.signTxns(t):De.signTxns(t)})),T(we,"execute",(function(t){return t.contractVersion===At.V1_1?de.execute(t):De.execute(t)})),T(we,"calculateBootstrapFundingTxnAmount",(function(t){var e=t.contractVersion,n=t.isAlgoPool;return e===At.V1_1?de.getBootstrapFundingTxnAmount(n):De.getBootstrapFundingTxnAmount(n)})),we),Pe=function(t){return t[t.FEE_TXN=0]="FEE_TXN",t[t.VALIDATOR_APP_CALL_TXN=1]="VALIDATOR_APP_CALL_TXN",t[t.ASSET1_IN_TXN=2]="ASSET1_IN_TXN",t[t.ASSET2_IN_TXN=3]="ASSET2_IN_TXN",t[t.LIQUDITY_OUT_TXN=4]="LIQUDITY_OUT_TXN",t}({}),ke=5*t.ALGORAND_MIN_TX_FEE,Le=function(t){return t.SINGLE="single",t.FLEXIBLE="flexible",t.INITIAL="initial",t}({}),Fe=(T(be={},Le.FLEXIBLE,{ASSET1_IN_TXN:0,ASSET2_IN_TXN:1,VALIDATOR_APP_CALL_TXN:2}),T(be,Le.SINGLE,{ASSET_IN_TXN:0,VALIDATOR_APP_CALL_TXN:1}),T(be,Le.INITIAL,{ASSET1_IN_TXN:0,ASSET2_IN_TXN:1,VALIDATOR_APP_CALL_TXN:2}),be),Be=(T(Ee={},Le.INITIAL,1),T(Ee,Le.SINGLE,2),T(Ee,Le.FLEXIBLE,2),Ee),Re=(T(Se={},Le.INITIAL,3),T(Se,Le.FLEXIBLE,3),T(Se,Le.SINGLE,2),Se);function Me(t){var e=t.assetIn,n=t.assetOut;return Z(n.decimals,Number(n.amount))/Z(e.decimals,Number(e.amount))}function Ce(t){var e=t.inputSupply,n=t.outputSupply,r=t.assetIn,s=t.assetOut,a=Me({assetIn:r,assetOut:s}),o=Z(s.decimals,Number(n))/Z(r.decimals,Number(e));return tt({decimalPlaces:5},Math.abs(a/o-1))}function Xe(t){var e,n,r,s=t.reserves,a=t.totalFeeShare,o=t.asset1,i=t.asset2,u=s.asset1*s.asset2,c=s.asset1+BigInt(o.amount),p=s.asset2+BigInt(i.amount),l=c*p,d=BigInt(parseInt(String(Math.sqrt(Number(l*s.issuedLiquidity*s.issuedLiquidity/u))))),f=d-s.issuedLiquidity,m=f*c/d,g=f*p/d,I=BigInt(o.amount)-m,A=BigInt(i.amount)-g;if(I>A){var x=I;r=je(x,a),e={id:o.id,amount:x+r,decimals:o.decimals,reserves:s.asset1},n={id:i.id,amount:BigInt(Math.abs(Math.min(Number(A),0))),decimals:i.decimals,reserves:s.asset2},f-=r*d/(c*BigInt(2))}else{var h=A;r=je(h,a),e={id:i.id,amount:h+r,decimals:i.decimals,reserves:s.asset2},n={id:o.id,amount:BigInt(Math.abs(Math.min(Number(I),0))),decimals:o.decimals,reserves:s.asset1},f-=r*d/(p*BigInt(2))}return{poolTokenOutAmount:f,internalSwapQuote:{assetIn:e,assetOut:n,swapFees:r,priceImpact:Ce({inputSupply:e.reserves,outputSupply:n.reserves,assetIn:e,assetOut:n})}}}function je(t,e){return t*BigInt(e)/(BigInt(1e4)-BigInt(e))}function Ve(e){return(Be[e]+1)*t.ALGORAND_MIN_TX_FEE}var Qe=ut("add_liquidity"),Ue=(T(Oe={},At.V1_1,[ut("mint")]),T(Oe,At.V2,{INITIAL_LIQUIDITY:[ut("add_initial_liquidity")],SINGLE_ASSET_MODE:[Qe,ut("single")],FLEXIBLE_MODE:[Qe,ut("flexible")]}),Oe);function Ge(){return(Ge=I(m().mark((function e(r){var s,a,o,i,u,c,p,l,d,f,g,I,A,x,h,T;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=r.client,a=r.network,o=r.poolAddress,i=r.asset1In,u=r.asset2In,c=r.poolTokenOut,p=r.slippage,l=r.initiatorAddr,d=H("negative",p,c.amount),e.next=4,s.getTransactionParams().do();case 4:return f=e.sent,g=t.makeApplicationNoOpTxnFromObject({from:o,appIndex:yt(a,At.V1_1),appArgs:Ue.v1_1,accounts:[l],note:Tt.getAppCallTxnNoteWithClientName(At.V1_1),foreignAssets:u.id==ct?[i.id,c.id]:[i.id,u.id,c.id],suggestedParams:f}),I=t.makeAssetTransferTxnWithSuggestedParamsFromObject({from:l,to:o,assetIndex:i.id,amount:i.amount,suggestedParams:f}),A=u.id===ct?t.makePaymentTxnWithSuggestedParamsFromObject({from:l,to:o,amount:u.amount,suggestedParams:f}):t.makeAssetTransferTxnWithSuggestedParamsFromObject({from:l,to:o,assetIndex:u.id,amount:u.amount,suggestedParams:f}),x=t.makeAssetTransferTxnWithSuggestedParamsFromObject({from:o,to:l,assetIndex:c.id,amount:d,suggestedParams:f}),h=t.makePaymentTxnWithSuggestedParamsFromObject({from:l,to:o,amount:g.fee+x.fee,note:n,suggestedParams:f}),T=t.assignGroupID([h,g,I,A,x]),e.abrupt("return",[{txn:T[0],signers:[l]},{txn:T[1],signers:[o]},{txn:T[2],signers:[l]},{txn:T[3],signers:[l]},{txn:T[4],signers:[o]}]);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function We(){return(We=I(m().mark((function e(n){var r,s,a,o,i,u,c,p,l,d;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.pool,s=n.txGroup,a=n.initiatorSigner,o=r.account,e.next=4,a([s]);case 4:return i=e.sent,u=O(i,3),c=u[0],p=u[1],l=u[2],d=s.map((function(e,n){return n===Pe.FEE_TXN?c:n===Pe.ASSET1_IN_TXN?p:n===Pe.ASSET2_IN_TXN?l:t.signLogicSigTransactionObject(e.txn,o).blob})),e.abrupt("return",d);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qe(){return(qe=I(m().mark((function t(e){var n,r,s,a,o,i,u,c,p,l,d,f,g,I,A,x,h;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.client,r=e.pool,s=e.txGroup,a=e.signedTxns,o=e.initiatorAddr,t.prev=1,i=BigInt(s[Pe.LIQUDITY_OUT_TXN].txn.amount),t.next=5,Bt({client:n,pool:r,accountAddr:o});case 5:return u=t.sent,t.next=8,rt(n,[a]);case 8:return c=t.sent,p=O(c,1),l=p[0],d=l.confirmedRound,f=l.txnID,g=at(s),I=ot(s),t.next=17,Bt({client:n,pool:r,accountAddr:o});case 17:return A=t.sent,(x=A.excessPoolTokens-u.excessPoolTokens)<0n&&(x=0n),t.abrupt("return",{round:d,fees:g,poolTokenID:r.poolTokenID,poolTokenOut:i+x,excessAmount:{excessAmountForAddingLiquidity:x,totalExcessAmount:A.excessPoolTokens},txnID:f,groupID:I});case 23:throw t.prev=23,t.t0=t.catch(1),"SlippageTolerance"===(h=new X(t.t0,"We encountered something unexpected while adding liquidity. Try again later.")).type&&h.setMessage("Adding liquidity failed due to too much slippage in the price. Please adjust the slippage tolerance and try again."),h;case 28:case"end":return t.stop()}}),t,null,[[1,23]])})))).apply(this,arguments)}var ze=Object.freeze({__proto__:null,execute:function(t){return qe.apply(this,arguments)},generateTxns:function(t){return Ge.apply(this,arguments)},getQuote:function(t){var e=t.pool,n=t.reserves,r=t.asset1In,s=t.asset2In;if(0n===n.issuedLiquidity){var a=BigInt(Math.floor(Math.sqrt(Number(r)*Number(s))));if(a<=BigInt(p))throw new Error("Initial liquidity amount is too small. The amount must be greater than ".concat(p,", this quote is for ").concat(a,"."));return{round:n.round,asset1ID:e.asset1ID,asset1In:BigInt(r),asset2ID:e.asset2ID,asset2In:BigInt(s),poolTokenID:e.poolTokenID,poolTokenOut:a-BigInt(p),share:1}}var o=BigInt(r)*n.issuedLiquidity/n.asset1,i=BigInt(s)*n.issuedLiquidity/n.asset2,u=o<i?o:i;return{round:n.round,asset1ID:e.asset1ID,asset1In:BigInt(r),asset2ID:e.asset2ID,asset2In:BigInt(s),poolTokenID:e.poolTokenID,poolTokenOut:u,share:re.getPoolShare(n.issuedLiquidity+u,u)}},signTxns:function(t){return We.apply(this,arguments)}});function Je(t){var e=t.txGroup;return(0,t.initiatorSigner)([e])}function Ye(t){return Ke.apply(this,arguments)}function Ke(){return(Ke=I(m().mark((function t(e){var n,r,s,a,o,i,u,c,p,l,d,f,g;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.client,r=e.pool,s=e.txGroup,a=e.signedTxns,t.prev=1,t.next=4,rt(n,[a]);case 4:return u=t.sent,c=O(u,1),p=c[0],l=p.confirmedRound,d=p.txnID,t.next=11,Ae(n,s);case 11:if(t.t1=o=t.sent,t.t0=null===t.t1,t.t0){t.next=15;break}t.t0=void 0===o;case 15:if(!t.t0){t.next=19;break}t.t2=void 0,t.next=20;break;case 19:t.t2=null===(i=o.find((function(t){return"axfer"===t.txn.txn.type})))||void 0===i?void 0:i.txn.txn;case 20:return f=t.t2,t.abrupt("return",{round:l,assetOut:f?{amount:f.aamt,id:f.xaid}:void 0,fees:at(s),poolTokenID:r.poolTokenID,txnID:d,groupID:ot(s)});case 24:throw t.prev=24,t.t3=t.catch(1),"SlippageTolerance"===(g=new X(t.t3,"We encountered something unexpected while adding liquidity. Try again later.")).type&&g.setMessage("Adding liquidity failed due to too much slippage in the price. Please adjust the slippage tolerance and try again."),g;case 29:case"end":return t.stop()}}),t,null,[[1,24]])})))).apply(this,arguments)}function He(){return(He=I(m().mark((function e(n){var r,s,a,o,i,u,c,p,l,d,f,g,I,A,x,h,T,v;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.client,s=n.network,a=n.poolAddress,o=n.asset1In,i=n.asset2In,u=n.poolTokenOut,c=n.initiatorAddr,p=n.minPoolTokenAssetAmount,e.next=3,r.getTransactionParams().do();case 3:return l=e.sent,d=ft(o,i),f=O(d,2),g=f[0],I=f[1],A=gt(I.id),x=t.makeAssetTransferTxnWithSuggestedParamsFromObject({from:c,to:a,assetIndex:g.id,amount:g.amount,suggestedParams:l}),h=A?t.makePaymentTxnWithSuggestedParamsFromObject({from:c,to:a,amount:I.amount,suggestedParams:l}):t.makeAssetTransferTxnWithSuggestedParamsFromObject({from:c,to:a,assetIndex:I.id,amount:I.amount,suggestedParams:l}),(T=t.makeApplicationNoOpTxnFromObject({from:c,appIndex:yt(s,At.V2),note:Tt.getAppCallTxnNoteWithClientName(At.V2),appArgs:[].concat(N(Ue.v2.FLEXIBLE_MODE),[t.encodeUint64(p)]),accounts:[a],foreignAssets:[u.id],suggestedParams:l})).fee=Ve(Le.FLEXIBLE),v=t.assignGroupID([x,h,T]),e.abrupt("return",[{txn:v[0],signers:[c]},{txn:v[1],signers:[c]},{txn:v[2],signers:[c]}]);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ze=Object.freeze({__proto__:null,execute:Ye,generateTxns:function(t){return He.apply(this,arguments)},getQuote:function(t){var e=t.pool,n=t.slippage,r=void 0===n?.05:n,s=t.asset1,a=t.asset2;if(0n===e.issuedPoolTokens)throw new Error("Pool has no liquidity at the moment. To be able to do Flexible Swap, you should first add initial liquidity.");if(e.status!==Xt.READY)throw new Error("Pool is not ready");if(!e.poolTokenID)throw new Error("Pool token ID is not available");var o={asset1:e.asset1Reserves||0n,asset2:e.asset2Reserves||0n,issuedLiquidity:e.issuedPoolTokens||0n},i=Xe({reserves:o,totalFeeShare:e.totalFeeShare,asset1:{id:e.asset1ID,amount:s.amount,decimals:s.decimals},asset2:{id:e.asset2ID,amount:a.amount,decimals:a.decimals}}),u=i.poolTokenOutAmount,c=i.internalSwapQuote,p=u-BigInt(Math.ceil(Number(u)*r));return{asset1In:{id:e.asset1ID,amount:BigInt(s.amount)},asset2In:{id:e.asset2ID,amount:BigInt(a.amount)},poolTokenOut:{id:e.poolTokenID,amount:u},share:re.getPoolShare(o.issuedLiquidity+u,u),slippage:r,internalSwapQuote:c,minPoolTokenAssetAmountWithSlippage:p}},signTxns:Je});function $e(){return($e=I(m().mark((function e(n){var r,s,a,o,i,u,c,p,l,d,f,g;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.client,s=n.network,a=n.poolAddress,o=n.assetIn,i=n.poolTokenId,u=n.initiatorAddr,c=n.minPoolTokenAssetAmount,e.next=3,r.getTransactionParams().do();case 3:return p=e.sent,l=gt(o.id),d=l?t.makePaymentTxnWithSuggestedParamsFromObject({from:u,to:a,amount:o.amount,suggestedParams:p}):t.makeAssetTransferTxnWithSuggestedParamsFromObject({from:u,to:a,assetIndex:o.id,amount:o.amount,suggestedParams:p}),(f=t.makeApplicationNoOpTxnFromObject({from:u,appIndex:yt(s,At.V2),note:Tt.getAppCallTxnNoteWithClientName(At.V2),appArgs:[].concat(N(Ue.v2.SINGLE_ASSET_MODE),[t.encodeUint64(c)]),accounts:[a],foreignAssets:[i],suggestedParams:p})).fee=Ve(Le.SINGLE),g=t.assignGroupID([d,f]),e.abrupt("return",[{txn:g[0],signers:[u]},{txn:g[1],signers:[u]}]);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var tn=Object.freeze({__proto__:null,execute:Ye,generateTxns:function(t){return $e.apply(this,arguments)},getQuote:function(t){var e=t.pool,n=t.assetIn,r=t.slippage,s=void 0===r?.05:r,a=t.decimals;if(0n===e.issuedPoolTokens)throw new Error("Pool has no liquidity");if(e.status!==Xt.READY)throw new Error("Pool is not ready");if(!e.poolTokenID)throw new Error("Pool token ID is not available");var o=n.id===e.asset1ID,i=n.id===e.asset2ID;if(!o&&!i)throw new Error("Provided input asset id didn't match any asset of the pool");var u={id:e.asset1ID,amount:o?n.amount:0,decimals:a.asset1},c={id:e.asset2ID,amount:i?n.amount:0,decimals:a.asset2},p={asset1:e.asset1Reserves||0n,asset2:e.asset2Reserves||0n,issuedLiquidity:e.issuedPoolTokens||0n},l=Xe({reserves:p,totalFeeShare:e.totalFeeShare||0,asset1:u,asset2:c}),d=l.poolTokenOutAmount,f=l.internalSwapQuote,m=d-BigInt(Math.ceil(Number(d)*s));return{assetIn:{id:o?e.asset1ID:e.asset2ID,amount:BigInt(n.amount)},poolTokenOut:{id:e.poolTokenID,amount:d},share:re.getPoolShare(p.issuedLiquidity+d,d),slippage:s,internalSwapQuote:f,minPoolTokenAssetAmountWithSlippage:m}},signTxns:Je});function en(){return(en=I(m().mark((function e(n){var r,s,a,o,i,u,c,p,l,d,f,g,I;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.client,s=n.pool,a=n.network,o=n.poolAddress,i=n.asset1In,u=n.asset2In,c=n.poolTokenId,p=n.initiatorAddr,l=gt(s.asset2ID),e.next=4,r.getTransactionParams().do();case 4:return d=e.sent,f=t.makeAssetTransferTxnWithSuggestedParamsFromObject({from:p,to:o,assetIndex:s.asset1ID,amount:i.amount,suggestedParams:d}),g=l?t.makePaymentTxnWithSuggestedParamsFromObject({from:p,to:o,amount:u.amount,suggestedParams:d}):t.makeAssetTransferTxnWithSuggestedParamsFromObject({from:p,to:o,assetIndex:s.asset2ID,amount:u.amount,suggestedParams:d}),(I=t.makeApplicationNoOpTxnFromObject({from:p,appIndex:yt(a,At.V2),appArgs:Ue.v2.INITIAL_LIQUIDITY,note:Tt.getAppCallTxnNoteWithClientName(At.V2),accounts:[o],foreignAssets:[c],suggestedParams:d})).fee=Ve(Le.INITIAL),e.abrupt("return",t.assignGroupID([f,g,I]).map((function(t){return{txn:t,signers:[p]}})));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var nn,rn=Object.freeze({__proto__:null,execute:Ye,generateTxns:function(t){return en.apply(this,arguments)},getQuote:function(t){var e=t.pool,n=t.asset1,r=t.asset2,s=t.slippage,a=void 0===s?.05:s;if(0n!==e.issuedPoolTokens)throw new Error("Pool already has liquidity");var o=BigInt(Math.floor(Math.sqrt(Number(n.amount)*Number(r.amount))));if(o<=BigInt(Vt))throw new Error("Initial liquidity amount is too small. Liquidity amount must be greater than ".concat(Vt,", this quote is for ").concat(o,"."));var i=function(t,e){if(!t.amount||!e.amount)throw new Error("Both assets are required for the initial add liquidity");return BigInt(Math.abs(Math.floor(Math.sqrt($(t.decimals,Math.floor(Number(t.amount)))*$(e.decimals,Math.floor(Number(e.amount))))-Vt)))}(n,r);return{asset1In:{id:e.asset1ID,amount:BigInt(n.amount)},asset2In:{id:e.asset2ID,amount:BigInt(r.amount)},poolTokenOut:{id:e.poolTokenID,amount:i},slippage:a}},signTxns:Je}),sn=Object.freeze({__proto__:null,flexible:Ze,initial:rn,withSingleAsset:tn}),an=(T(nn={},At.V1_1,ze),T(nn,At.V2,sn),nn),on=function(t){return t[t.FEE_TXN=0]="FEE_TXN",t[t.VALIDATOR_APP_CALL_TXN=1]="VALIDATOR_APP_CALL_TXN",t[t.ASSET1_OUT_TXN=2]="ASSET1_OUT_TXN",t[t.ASSET2_OUT_TXN=3]="ASSET2_OUT_TXN",t[t.POOL_TOKEN_IN_TXN=4]="POOL_TOKEN_IN_TXN",t}({}),un=Object.values(on).length,cn=2,pn=ut("remove_liquidity"),ln=function(t){return t[t.ASSET_TRANSFER_TXN=0]="ASSET_TRANSFER_TXN",t[t.APP_CALL_TXN=1]="APP_CALL_TXN",t}({});function dn(){return(dn=I(m().mark((function e(r){var s,a,o,i,u,c,p,l,d,f,g,I,A,x,h,T,v,y,_,w;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=r.client,a=r.pool,o=r.poolTokenIn,i=r.asset1Out,u=r.asset2Out,c=r.slippage,p=r.initiatorAddr,e.next=3,s.getTransactionParams().do();case 3:return l=e.sent,d=a.account.address(),f=gt(a.asset2ID),g=t.makeApplicationNoOpTxnFromObject({from:d,appIndex:a.validatorAppID,appArgs:[ut("burn")],note:Tt.getAppCallTxnNoteWithClientName(At.V1_1),accounts:[p],foreignAssets:f?[a.asset1ID,a.poolTokenID]:[a.asset1ID,a.asset2ID,a.poolTokenID],suggestedParams:l}),I=H("negative",c,i),A=t.makeAssetTransferTxnWithSuggestedParamsFromObject({from:d,to:p,assetIndex:a.asset1ID,amount:I,suggestedParams:l}),x=H("negative",c,u),h=f?t.makePaymentTxnWithSuggestedParamsFromObject({from:d,to:p,amount:x,suggestedParams:l}):t.makeAssetTransferTxnWithSuggestedParamsFromObject({from:d,to:p,assetIndex:a.asset2ID,amount:x,suggestedParams:l}),T=t.makeAssetTransferTxnWithSuggestedParamsFromObject({from:p,to:d,assetIndex:a.poolTokenID,amount:o,suggestedParams:l}),v=g.fee+A.fee+h.fee,y=t.makePaymentTxnWithSuggestedParamsFromObject({from:p,to:d,amount:v,note:n,suggestedParams:l}),(_=[])[on.FEE_TXN]=y,_[on.VALIDATOR_APP_CALL_TXN]=g,_[on.ASSET1_OUT_TXN]=A,_[on.ASSET2_OUT_TXN]=h,_[on.POOL_TOKEN_IN_TXN]=T,w=t.assignGroupID(_),e.abrupt("return",[{txn:w[on.FEE_TXN],signers:[p]},{txn:w[on.VALIDATOR_APP_CALL_TXN],signers:[d]},{txn:w[on.ASSET1_OUT_TXN],signers:[d]},{txn:w[on.ASSET2_OUT_TXN],signers:[d]},{txn:w[on.POOL_TOKEN_IN_TXN],signers:[p]}]);case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fn(){return(fn=I(m().mark((function e(n){var r,s,a,o,i,u,c,p,l;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.pool,s=n.txGroup,a=n.initiatorSigner,e.next=3,a([s]);case 3:return o=e.sent,i=O(o,2),u=i[0],c=i[1],p=r.account,l=s.map((function(e,n){return n===on.FEE_TXN?u:n===on.POOL_TOKEN_IN_TXN?c:t.signLogicSigTransactionObject(e.txn,p).blob})),e.abrupt("return",l);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mn(){return(mn=I(m().mark((function t(e){var n,r,s,a,o,i,u,c,p,l,d,f,g,I,A,x,h,T;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.client,r=e.pool,s=e.txGroup,a=e.signedTxns,o=e.initiatorAddr,t.prev=1,i=s[on.ASSET1_OUT_TXN].txn.amount,u=s[on.ASSET2_OUT_TXN].txn.amount,c=s[on.POOL_TOKEN_IN_TXN].txn.amount,t.next=7,Bt({client:n,pool:r,accountAddr:o});case 7:return p=t.sent,t.next=10,rt(n,[a]);case 10:return l=t.sent,d=O(l,1),f=d[0],g=f.confirmedRound,I=f.txnID,t.next=17,Bt({client:n,pool:r,accountAddr:o});case 17:return A=t.sent,(x=A.excessAsset1-p.excessAsset1)<0n&&(x=0n),(h=A.excessAsset2-p.excessAsset2)<0n&&(h=0n),t.abrupt("return",{round:g,fees:at(s),asset1ID:r.asset1ID,asset1Out:BigInt(i)+x,asset2ID:r.asset2ID,asset2Out:BigInt(u)+h,poolTokenID:r.poolTokenID,poolTokenIn:BigInt(c),excessAmounts:[{assetID:r.asset1ID,excessAmountForBurning:x,totalExcessAmount:A.excessAsset1},{assetID:r.asset2ID,excessAmountForBurning:h,totalExcessAmount:A.excessAsset2}],txnID:I,groupID:ot(s)});case 25:throw t.prev=25,t.t0=t.catch(1),"SlippageTolerance"===(T=new X(t.t0,"We encountered something unexpected while burning liquidity. Try again later.")).type&&T.setMessage("The burn failed due to too much slippage in the price. Please adjust the slippage tolerance and try again."),T;case 30:case"end":return t.stop()}}),t,null,[[1,25]])})))).apply(this,arguments)}var gn,In,An={generateTxns:function(t){return dn.apply(this,arguments)},getQuote:function(t){var e=t.pool,n=t.reserves,r=t.poolTokenIn,s=BigInt(r),a=n.issuedLiquidity&&s*n.asset1/n.issuedLiquidity,o=n.issuedLiquidity&&s*n.asset2/n.issuedLiquidity;return{round:n.round,poolTokenID:e.poolTokenID,poolTokenIn:s,asset1ID:e.asset1ID,asset1Out:a,asset2ID:e.asset2ID,asset2Out:o}},signTxns:function(t){return fn.apply(this,arguments)},execute:function(t){return mn.apply(this,arguments)}},xn=function(t){return t.FixedInput="fixed-input",t.FixedOutput="fixed-output",t}({}),hn=function(t){return t[t.INPUT_TXN=0]="INPUT_TXN",t[t.APP_CALL_TXN=1]="APP_CALL_TXN",t}({}),Tn=(T(gn={},xn.FixedInput,1),T(gn,xn.FixedOutput,2),gn),vn=2,yn=ut("swap"),_n=(T(In={},xn.FixedInput,ut("fixed-input")),T(In,xn.FixedOutput,ut("fixed-output")),In),wn=function(t){v(n,b(Error));var e=S(n);function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Output amount exceeds available liquidity";return A(this,n),e.call(this,t)}return h(n)}();function Dn(){return(Dn=I(m().mark((function e(n){var r,s,a,o,i,u,c,p,l,d,f,g,I,A,x,h,T;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.client,s=n.pool,a=n.swapType,o=n.assetIn,i=n.assetOut,u=n.initiatorAddr,c=n.slippage,p=s.account.address(),(l=[s.asset1ID,s.asset2ID]).includes(o.id)&&l.includes(i.id)&&o.id!==i.id){e.next=5;break}throw new X({pool:s,assetIn:o,assetOut:i},"Input asset (#".concat(o.id,") and output asset (#").concat(i.id,") provided to generate transactions do not belong to the pool ").concat(p,"."));case 5:return e.next=7,r.getTransactionParams().do();case 7:return d=e.sent,f=gt(o.id),g=a===xn.FixedInput?o.amount:H("positive",c,o.amount),I=a===xn.FixedOutput?i.amount:H("negative",c,i.amount),A=f?t.makePaymentTxnWithSuggestedParamsFromObject({from:u,to:p,amount:g,suggestedParams:d}):t.makeAssetTransferTxnWithSuggestedParamsFromObject({from:u,to:p,amount:g,assetIndex:o.id,suggestedParams:d}),(x=t.makeApplicationNoOpTxnFromObject({from:u,appIndex:s.validatorAppID,appArgs:[yn,_n[a],t.encodeUint64(I)],note:Tt.getAppCallTxnNoteWithClientName(At.V2),accounts:[p],foreignAssets:[s.asset1ID,s.asset2ID],suggestedParams:d})).fee=bn(a),(h=[])[hn.INPUT_TXN]=A,h[hn.APP_CALL_TXN]=x,T=t.assignGroupID(h),e.abrupt("return",[{txn:T[hn.INPUT_TXN],signers:[u]},{txn:T[hn.APP_CALL_TXN],signers:[u]}]);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bn(e){return(Tn[e]+1)*t.ALGORAND_MIN_TX_FEE}function En(){return(En=I(m().mark((function t(e){var n,r,s,a,o,i,u,c,p,l,d,f,g,I,A,x,h;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.client,a=e.pool,o=e.txGroup,i=e.signedTxns,u=e.network,c=e.assetIn,t.next=3,rt(s,[i]);case 3:return p=t.sent,l=O(p,1),d=l[0],f=d.confirmedRound,g=d.txnID,t.next=10,Ae(s,o);case 10:return I=t.sent,A=[a.asset1ID,a.asset2ID].filter((function(t){return t!==c.id}))[0],x=null==I||null===(n=I.find((function(t){return t.txn.txn.xaid===c.id})))||void 0===n?void 0:n.txn.txn,h=null==I||null===(r=I.find((function(t){return t.txn.txn.xaid===A})))||void 0===r?void 0:r.txn.txn,t.t0=f,t.t1=x&&{amount:BigInt(c.amount)-BigInt(x.aamt||0),id:c.id},t.t2=h&&{amount:h.aamt,id:A},t.next=19,re.v2.getPoolInfo({client:s,network:u,asset1ID:a.asset1ID,asset2ID:a.asset2ID});case 19:return t.t3=t.sent,t.t4=g,t.abrupt("return",{round:t.t0,assetIn:t.t1,assetOut:t.t2,pool:t.t3,txnID:t.t4});case 22:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Sn(t){var e=t.pool,n=t.assetIn,r=t.decimals;if(e.status!==Xt.READY)throw new X({pool:e,assetIn:n},"Trying to swap on a non-existent pool");var s,a,o,i=BigInt(n.amount),u=e.totalFeeShare;if(n.id===e.asset1ID)s=e.asset2ID,a=e.asset1Reserves,o=e.asset2Reserves;else{if(n.id!==e.asset2ID)throw new X({pool:e,assetIn:n},"Input asset (#".concat(n.id,") doesn't belong to the pool ").concat(e.account.address(),"."));s=e.asset1ID,a=e.asset2Reserves,o=e.asset1Reserves}var c=Nn({inputSupply:a,outputSupply:o,swapInputAmount:i,totalFeeShare:u,decimals:r}),p=c.swapOutputAmount,l=c.totalFeeAmount,d=c.priceImpact;if(p>o)throw new wn;return{assetInID:n.id,assetInAmount:i,assetOutID:s,assetOutAmount:p,swapFee:Number(l),rate:Z(r.assetOut,Number(p))/Z(r.assetIn,Number(i)),priceImpact:d}}function On(t){var e=t.pool,n=t.assetOut,r=t.decimals;if(e.status!==Xt.READY)throw new X({pool:e,assetOut:n},"Trying to swap on a non-existent pool");var s,a,o,i=BigInt(n.amount),u=e.totalFeeShare;if(n.id===e.asset1ID)s=e.asset2ID,a=e.asset2Reserves,o=e.asset1Reserves;else{if(n.id!==e.asset2ID)throw new X({pool:e,assetOut:n},"Output asset (#".concat(n.id,") doesn't belong to the pool ").concat(e.account.address(),"."));s=e.asset1ID,a=e.asset1Reserves,o=e.asset2Reserves}var c=function(t){var e=t.inputSupply,n=t.outputSupply,r=t.swapOutputAmount,s=t.totalFeeShare,a=t.decimals,o=function(t){var e=t.inputSupply,n=t.outputSupply,r=t.outputAmount,s=e*n,a=BigInt(s/(n-r))-e;return a+=BigInt(1),a}({inputSupply:e,outputSupply:n,outputAmount:r}),i=function(t){var e=t.swapAmount,n=t.totalFeeShare,r=Math.floor(Number(e*BigInt(1e4)/(BigInt(1e4)-BigInt(n)))),s=BigInt(r)-e;return s}({swapAmount:o,totalFeeShare:s}),u=o+i,c=Ce({inputSupply:e,outputSupply:n,assetIn:{amount:u,decimals:a.assetIn},assetOut:{amount:r,decimals:a.assetOut}});return{swapInputAmount:u,totalFeeAmount:i,priceImpact:c}}({inputSupply:a,outputSupply:o,swapOutputAmount:i,totalFeeShare:u,decimals:r}),p=c.swapInputAmount,l=c.totalFeeAmount,d=c.priceImpact;if(i>o)throw new wn;return{assetInID:s,assetInAmount:p,assetOutID:n.id,assetOutAmount:i,swapFee:Number(l),rate:Z(r.assetOut,Number(i))/Z(r.assetIn,Number(p)),priceImpact:d}}function Nn(t){var e=t.inputSupply,n=t.outputSupply,r=t.swapInputAmount,s=t.totalFeeShare,a=t.decimals,o=BigInt(function(t){var e=t.inputAmount,n=t.totalFeeShare;return Math.floor(Number(e*BigInt(n))/1e4)}({inputAmount:r,totalFeeShare:s})),i=function(t){var e=t.inputSupply,n=t.outputSupply,r=t.swapAmount,s=e*n,a=n-BigInt(s/(e+BigInt(r)));return a-=BigInt(1)}({inputSupply:e,outputSupply:n,swapAmount:r-o});return{swapOutputAmount:i,totalFeeAmount:o,priceImpact:Ce({inputSupply:e,outputSupply:n,assetIn:{amount:r,decimals:a.assetIn},assetOut:{amount:i,decimals:a.assetOut}})}}var Pn={getQuote:function(t,e,n,r){return t===xn.FixedInput?Sn({pool:e,assetIn:n,decimals:r}):On({pool:e,assetOut:n,decimals:r})},getFixedInputSwapQuote:Sn,getFixedOutputSwapQuote:On,generateTxns:function(t){return Dn.apply(this,arguments)},signTxns:function(t){var e=t.txGroup;return(0,t.initiatorSigner)([e])},execute:function(t){return En.apply(this,arguments)},calculateFixedInputSwap:Nn};function kn(t,e){var n,r,s=BigInt(t),a=e.issuedLiquidity;return a>s+BigInt(Vt)?(n=s*e.asset1/a,r=s*e.asset2/a):(n=e.asset1,r=e.asset2),{asset1OutputAmount:n,asset2OutputAmount:r}}function Ln(){return(Ln=I(m().mark((function e(n){var r,s,a,o,i,u,c,p,l,d,f,g,I,A;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.client,s=n.pool,a=n.poolTokenIn,o=n.initiatorAddr,i=n.minAsset1Amount,u=n.minAsset2Amount,c=n.slippage,e.next=3,r.getTransactionParams().do();case 3:if(p=e.sent,l=s.account.address(),d=s.poolTokenID){e.next=8;break}throw new Error("Pool token asset ID is missing");case 8:return f=t.makeAssetTransferTxnWithSuggestedParamsFromObject({from:o,to:l,assetIndex:d,amount:a,suggestedParams:p}),(g=t.makeApplicationNoOpTxnFromObject({from:o,appIndex:s.validatorAppID,note:Tt.getAppCallTxnNoteWithClientName(At.V2),appArgs:[pn,t.encodeUint64(H("negative",c,i)),t.encodeUint64(H("negative",c,u))],accounts:[l],foreignAssets:[s.asset1ID,s.asset2ID],suggestedParams:p})).fee=(cn+1)*t.ALGORAND_MIN_TX_FEE,(I=[])[ln.ASSET_TRANSFER_TXN]=f,I[ln.APP_CALL_TXN]=g,A=t.assignGroupID(I),e.abrupt("return",[{txn:A[ln.ASSET_TRANSFER_TXN],signers:[o]},{txn:A[ln.APP_CALL_TXN],signers:[o]}]);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fn(){return(Fn=I(m().mark((function e(n){var r,s,a,o,i,u,c,p,l,d,f,g,I,A,x,h,T,v,y;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.client,s=n.pool,a=n.initiatorAddr,o=n.poolTokenIn,i=n.outputAssetId,u=n.minOutputAssetAmount,c=n.slippage,e.next=3,r.getTransactionParams().do();case 3:if(p=e.sent,l=s.asset1ID,d=s.asset2ID,f=s.account.address(),g=s.poolTokenID){e.next=9;break}throw new Error("Pool token asset ID is missing");case 9:if(I=0,A=0,x=H("negative",c,u),i!==l){e.next=17;break}I=x,A=0,e.next=23;break;case 17:if(i!==d){e.next=22;break}I=0,A=x,e.next=23;break;case 22:throw new Error("Invalid output asset id. It doesn't match with pool assets");case 23:return h=t.makeAssetTransferTxnWithSuggestedParamsFromObject({from:a,to:f,assetIndex:g,amount:o,suggestedParams:p}),(T=t.makeApplicationNoOpTxnFromObject({from:a,appIndex:s.validatorAppID,note:Tt.getAppCallTxnNoteWithClientName(At.V2),appArgs:[pn,t.encodeUint64(I),t.encodeUint64(A)],accounts:[f],foreignAssets:[i],suggestedParams:p})).fee=(cn+1)*t.ALGORAND_MIN_TX_FEE,(v=[])[ln.ASSET_TRANSFER_TXN]=h,v[ln.APP_CALL_TXN]=T,y=t.assignGroupID(v),e.abrupt("return",[{txn:y[ln.ASSET_TRANSFER_TXN],signers:[a]},{txn:y[ln.APP_CALL_TXN],signers:[a]}]);case 31:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bn(){return(Bn=I(m().mark((function t(e){var n,r,s,a,o,i,u,c;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.client,s=e.txGroup,a=e.signedTxns,t.next=3,rt(r,[a]);case 3:return o=t.sent,i=O(o,1),u=i[0].txnID,t.next=8,Ae(r,s);case 8:if(t.t1=n=t.sent,t.t0=null===t.t1,t.t0){t.next=12;break}t.t0=void 0===n;case 12:if(!t.t0){t.next=16;break}t.t2=void 0,t.next=17;break;case 16:t.t2=n.map((function(t){return{assetId:t.txn.txn.xaid,amount:t.txn.txn.aamt}}));case 17:return c=t.t2,t.abrupt("return",{outputAssets:c,txnID:u});case 19:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Rn,Mn={getQuote:function(t){var e=t.pool,n=t.reserves,r=t.poolTokenIn,s=BigInt(r),a=kn(s,n),o=a.asset1OutputAmount,i=a.asset2OutputAmount;return{round:n.round,asset1Out:{assetId:e.asset1ID,amount:o},asset2Out:{assetId:e.asset2ID,amount:i},poolTokenIn:{assetId:e.poolTokenID,amount:s}}},getSingleAssetRemoveLiquidityQuote:function(t){var e,n=t.pool,r=t.reserves,s=t.poolTokenIn,a=t.assetOutID,o=t.decimals,i=BigInt(s),u=kn(i,r),c=u.asset1OutputAmount,p=u.asset2OutputAmount,l=n.totalFeeShare;if(a===n.asset1ID){var d=Pn.calculateFixedInputSwap({inputSupply:r.asset2-p,outputSupply:r.asset1-c,swapInputAmount:p,totalFeeShare:l,decimals:o}),f=d.swapOutputAmount,m=d.totalFeeAmount,g=d.priceImpact;e={round:r.round,assetOut:{assetId:a,amount:c+f},poolTokenIn:{assetId:n.poolTokenID,amount:i},internalSwapQuote:{amountIn:{assetId:n.asset2ID,amount:p},amountOut:{assetId:n.asset1ID,amount:f},swapFees:{assetId:n.asset2ID,amount:m},priceImpact:g}}}else{if(a!==n.asset2ID)throw new Error("assetOutID must be one of the pool assets");var I=Pn.calculateFixedInputSwap({inputSupply:r.asset1-c,outputSupply:r.asset2-p,swapInputAmount:c,totalFeeShare:l,decimals:o}),A=I.swapOutputAmount,x=I.totalFeeAmount,h=I.priceImpact;e={round:r.round,assetOut:{assetId:a,amount:p+A},poolTokenIn:{assetId:n.poolTokenID,amount:i},internalSwapQuote:{amountIn:{assetId:n.asset2ID,amount:p},amountOut:{assetId:n.asset1ID,amount:A},swapFees:{assetId:n.asset2ID,amount:x},priceImpact:h}}}return e},generateTxns:function(t){return Ln.apply(this,arguments)},generateSingleAssetOutTxns:function(t){return Fn.apply(this,arguments)},signTxns:function(t){var e=t.txGroup;return(0,t.initiatorSigner)([e])},execute:function(t){return Bn.apply(this,arguments)}},Cn=(T(Rn={},At.V1_1,An),T(Rn,At.V2,Mn),Rn),Xn=3n,jn=1000n,Vn=function(t){return t[t.FEE_TXN_INDEX=0]="FEE_TXN_INDEX",t[t.VALIDATOR_APP_CALL_TXN_INDEX=1]="VALIDATOR_APP_CALL_TXN_INDEX",t[t.ASSET_IN_TXN_INDEX=2]="ASSET_IN_TXN_INDEX",t[t.ASSET_OUT_TXN_INDEX=3]="ASSET_OUT_TXN_INDEX",t}(Vn||{});function Qn(){return(Qn=I(m().mark((function e(n){var r,s,a,o,i,u,c,p;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.pool,s=n.txGroup,a=n.initiatorSigner,e.next=3,a([s]);case 3:return o=e.sent,i=O(o,2),u=i[0],c=i[1],p=s.map((function(e,n){return n===Vn.FEE_TXN_INDEX?u:n===Vn.ASSET_IN_TXN_INDEX?c:t.signLogicSigTransactionObject(e.txn,r.account.lsig).blob})),e.abrupt("return",p);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Un(){return(Un=I(m().mark((function e(r){var s,a,o,i,u,c,p,l,d,f,g,I,A,x,h,T,v,y;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=r.client,a=r.pool,o=r.swapType,i=r.assetIn,u=r.assetOut,c=r.slippage,p=r.initiatorAddr,l=a.account.address(),(d=[a.asset1ID,a.asset2ID]).includes(i.id)&&d.includes(u.id)&&i.id!==u.id){e.next=5;break}throw new X({pool:a,assetIn:i,assetOut:u},"Input asset (#".concat(i.id,") and output asset (#").concat(u.id,") provided to generate transactions do not belong to the pool ").concat(l,"."));case 5:return e.next=7,s.getTransactionParams().do();case 7:return f=e.sent,g=[ut("swap"),o===xn.FixedInput?ut("fi"):ut("fo")],I=t.makeApplicationNoOpTxnFromObject({from:l,appIndex:a.validatorAppID,appArgs:g,accounts:[p],note:Tt.getAppCallTxnNoteWithClientName(At.V1_1),foreignAssets:a.asset2ID==ct?[a.asset1ID,a.poolTokenID]:[a.asset1ID,a.asset2ID,a.poolTokenID],suggestedParams:f}),A=o===xn.FixedOutput?H("positive",c,i.amount):i.amount,x=i.id===ct?t.makePaymentTxnWithSuggestedParamsFromObject({from:p,to:l,amount:A,suggestedParams:f}):t.makeAssetTransferTxnWithSuggestedParamsFromObject({from:p,to:l,assetIndex:i.id,amount:A,suggestedParams:f}),h=o===xn.FixedInput?H("negative",c,u.amount):u.amount,T=u.id===ct?t.makePaymentTxnWithSuggestedParamsFromObject({from:l,to:p,amount:h,suggestedParams:f}):t.makeAssetTransferTxnWithSuggestedParamsFromObject({from:l,to:p,assetIndex:u.id,amount:h,suggestedParams:f}),v=t.makePaymentTxnWithSuggestedParamsFromObject({from:p,to:l,amount:I.fee+T.fee,note:n,suggestedParams:f}),y=t.assignGroupID([v,I,x,T]),e.abrupt("return",[{txn:y[0],signers:[p]},{txn:y[1],signers:[l]},{txn:y[2],signers:[p]},{txn:y[3],signers:[l]}]);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gn(t){var e=t.pool,n=t.reserves,r=t.assetIn,s=t.decimals;if(e.status!==Xt.READY)throw new X({pool:e,assetIn:r},"Trying to swap on a non-existent pool");var a,o,i,u=BigInt(r.amount);if(r.id===e.asset1ID)a=e.asset2ID,o=n.asset1,i=n.asset2;else{if(r.id!==e.asset2ID)throw new X({pool:e,assetIn:r},"Input asset (#".concat(r.id,") doesn't belong to the pool ").concat(e.account.address(),"."));a=e.asset1ID,o=n.asset2,i=n.asset1}var c=u*Xn/jn,p=i-o*i/(o+(u-c));if(p>i)throw new wn;var l={assetIn:{amount:u,decimals:s.assetIn},assetOut:{amount:p,decimals:s.assetOut}};return{round:n.round,assetInID:r.id,assetInAmount:u,assetOutID:a,assetOutAmount:p,swapFee:Number(c),rate:Me(l),priceImpact:Ce(f({inputSupply:o,outputSupply:i},l))}}function Wn(t){return qn.apply(this,arguments)}function qn(){return(qn=I(m().mark((function t(e){var n,r,s,a,o,i,u,c,p,l,d,f,g,I,A,x;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.client,r=e.pool,s=e.signedTxns,a=e.assetIn,o=e.assetOut,i=e.initiatorAddr,t.next=3,Bt({client:n,pool:r,accountAddr:i});case 3:return u=t.sent,t.next=6,rt(n,[s]);case 6:return c=t.sent,p=O(c,1),l=p[0],d=l.confirmedRound,f=l.txnID,t.next=13,Bt({client:n,pool:r,accountAddr:i});case 13:return g=t.sent,o.id===r.asset1ID?(I=u.excessAsset1,A=g.excessAsset1):(I=u.excessAsset2,A=g.excessAsset2),(x=A-I)<0n&&(x=0n),t.abrupt("return",{round:d,assetInID:a.id,assetInAmount:BigInt(a.amount),assetOutID:o.id,assetOutAmount:BigInt(o.amount)+x,excessAmount:{assetID:o.id,excessAmountForSwap:x,totalExcessAmount:A},txnID:f});case 18:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function zn(t){var e=t.pool,n=t.reserves,r=t.assetOut,s=t.decimals;if(e.status!==Xt.READY)throw new X({pool:e,assetOut:r},"Trying to swap on a non-existent pool");var a,o,i,u=BigInt(r.amount);if(r.id===e.asset1ID)a=e.asset2ID,o=n.asset2,i=n.asset1;else{if(r.id!==e.asset2ID)throw new X({pool:e,assetOut:r},"Output asset (#".concat(r.id,") doesn't belong to the pool ").concat(e.account.address(),"."));a=e.asset1ID,o=n.asset1,i=n.asset2}if(u>i)throw new wn;var c=o*i/(i-u)-o,p=c*jn/(jn-Xn),l=p-c,d=Z(s.assetOut,Number(u))/Z(s.assetIn,Number(p)),f=Z(s.assetOut,Number(i))/Z(s.assetIn,Number(o)),m=tt({decimalPlaces:5},Math.abs(d/f-1));return{round:n.round,assetInID:a,assetInAmount:p,assetOutID:r.id,assetOutAmount:u,swapFee:Number(l),rate:d,priceImpact:m}}function Jn(t){return Yn.apply(this,arguments)}function Yn(){return(Yn=I(m().mark((function t(e){var n,r,s,a,o,i,u,c,p,l,d,f,g,I,A,x;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.client,r=e.pool,s=e.signedTxns,a=e.assetIn,o=e.assetOut,i=e.initiatorAddr,t.next=3,Bt({client:n,pool:r,accountAddr:i});case 3:return u=t.sent,t.next=6,rt(n,[s]);case 6:return c=t.sent,p=O(c,1),l=p[0],d=l.confirmedRound,f=l.txnID,t.next=13,Bt({client:n,pool:r,accountAddr:i});case 13:return g=t.sent,a.id===r.asset1ID?(I=u.excessAsset1,A=g.excessAsset1):(I=u.excessAsset2,A=g.excessAsset2),(x=A-I)<0n&&(x=0n),t.abrupt("return",{round:d,assetInID:a.id,assetInAmount:BigInt(a.amount)-x,assetOutID:o.id,assetOutAmount:BigInt(o.amount),excessAmount:{assetID:a.id,excessAmountForSwap:x,totalExcessAmount:A},txnID:f});case 18:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Kn(){return(Kn=I(m().mark((function t(e){var n,r,s,a,o,i,u,c,p,l;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.client,r=e.pool,s=e.swapType,a=e.txGroup,o=e.signedTxns,i=e.initiatorAddr,r.status===Xt.READY){t.next=3;break}throw new X({pool:r,swapType:s,txGroup:a},"Trying to swap on a non-existent pool");case 3:if(t.prev=3,u={id:a[Vn.ASSET_IN_TXN_INDEX].txn.assetIndex||ct,amount:a[Vn.ASSET_IN_TXN_INDEX].txn.amount},c={id:a[Vn.ASSET_OUT_TXN_INDEX].txn.assetIndex||ct,amount:a[Vn.ASSET_OUT_TXN_INDEX].txn.amount},s!==xn.FixedInput){t.next=12;break}return t.next=9,Wn({client:n,pool:r,signedTxns:o,assetIn:u,assetOut:c,initiatorAddr:i});case 9:p=t.sent,t.next=15;break;case 12:return t.next=14,Jn({client:n,pool:r,signedTxns:o,assetIn:u,assetOut:c,initiatorAddr:i});case 14:p=t.sent;case 15:return t.abrupt("return",f(f({},p),{},{groupID:ot(a),fees:at(a)}));case 18:throw t.prev=18,t.t0=t.catch(3),"SlippageTolerance"===(l=new X(t.t0,"We encountered something unexpected while swapping. Try again later.")).type&&l.setMessage("The swap failed due to too much slippage in the price. Please adjust the slippage tolerance and try again."),l;case 23:case"end":return t.stop()}}),t,null,[[3,18]])})))).apply(this,arguments)}var Hn,Zn={getQuote:function(t,e,n,r,s){return t===xn.FixedInput?Gn({pool:e,reserves:n,assetIn:r,decimals:s}):zn({pool:e,reserves:n,assetOut:r,decimals:s})},getFixedInputSwapQuote:Gn,getFixedOutputSwapQuote:zn,generateTxns:function(t){return Un.apply(this,arguments)},signTxns:function(t){return Qn.apply(this,arguments)},execute:function(t){return Kn.apply(this,arguments)},executeFixedOutputSwap:Jn},$n=4*t.ALGORAND_MIN_TX_FEE;function tr(t){return Promise.allSettled(t).then((function(t){if(t.every((function(t){return"rejected"===t.status&&t.reason instanceof wn})))throw new wn;return t.filter((function(t){return"fulfilled"===t.status&&void 0!==t.value.quote})).map((function(t){return t.value}))}))}function er(){return(er=I(m().mark((function t(e){var n,r,s,a,o,i;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.pools,r=e.assetIn,s=e.assetOut,a=e.amount,o=n.map((function(t){return new Promise((function(e,n){var o,i={pool:t.info,assetIn:{amount:a,id:Number(r.id)},decimals:{assetIn:r.decimals,assetOut:s.decimals},reserves:t.reserves};try{o=t.info.contractVersion===At.V1_1?Zn.getFixedInputSwapQuote(i):Pn.getFixedInputSwapQuote(i),e({pool:t,quote:o})}catch(t){n(t)}}))})),t.next=4,tr(o);case 4:return i=t.sent,t.abrupt("return",rr(i));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function nr(){return(nr=I(m().mark((function t(e){var n,r,s,a,o,i;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.pools,r=e.assetIn,s=e.assetOut,a=e.amount,o=n.map((function(t){return new Promise((function(e,n){var o,i={pool:t.info,assetOut:{amount:a,id:Number(s.id)},decimals:{assetIn:r.decimals,assetOut:s.decimals},reserves:t.reserves};try{o=t.info.contractVersion===At.V1_1?Zn.getFixedOutputSwapQuote(i):Pn.getFixedOutputSwapQuote(i),e({pool:t,quote:o})}catch(t){n(t)}}))})),t.next=4,tr(o);case 4:return i=t.sent,t.abrupt("return",rr(i));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function rr(t){return t.filter((function(t){return!te(t.pool.reserves)})).sort((function(t,e){return e.quote.rate-t.quote.rate}))[0]}var sr=(T(Hn={},At.V1_1,Zn),T(Hn,At.V2,Pn),T(Hn,"getQuote",(function(t){if(t.pools.every((function(t){return te(t.reserves)})))throw new Error("No pools available for swap");return t.type===xn.FixedInput?function(t){return er.apply(this,arguments)}(t):function(t){return nr.apply(this,arguments)}(t)})),T(Hn,"generateTxns",(function(t){return t.pool.contractVersion===At.V1_1?Zn.generateTxns(t):Pn.generateTxns(t)})),T(Hn,"signTxns",(function(t){return t.pool.contractVersion===At.V1_1?Zn.signTxns(t):Pn.signTxns(t)})),T(Hn,"execute",(function(t){return t.contractVersion===At.V1_1?Zn.execute(t):Pn.execute(t)})),Hn);function ar(){return(ar=I(m().mark((function t(e){var n,r,s,a,o,i,u,c,p,l;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.client,r=e.pool,s=e.txGroup,a=e.initiatorSigner,t.prev=1,t.next=4,or({txGroup:s,pool:r,initiatorSigner:a});case 4:return o=t.sent,t.next=7,rt(n,[o]);case 7:return i=t.sent,u=O(i,1),c=u[0],p=c.txnID,l=c.confirmedRound,t.abrupt("return",{fees:at(s),confirmedRound:l,txnID:p,groupID:ot(s)});case 15:throw t.prev=15,t.t0=t.catch(1),new X(t.t0,"We encountered something unexpected while redeeming. Try again later.");case 18:case"end":return t.stop()}}),t,null,[[1,15]])})))).apply(this,arguments)}function or(t){return ir.apply(this,arguments)}function ir(){return(ir=I(m().mark((function e(n){var r,s,a,o,i,u,c,p;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.txGroup,s=n.pool,a=n.initiatorSigner,e.next=3,a([r]);case 3:return o=e.sent,i=O(o,1),u=i[0],c=s.account.lsig,p=r.map((function(e,n){return 0===n?u:t.signLogicSigTransactionObject(e.txn,c).blob})),e.abrupt("return",p);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ur(){return ur=I(m().mark((function e(n){var r,s,a,o,i,u;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.client,s=n.data,a=n.initiatorSigner,e.prev=1,o=s.map((function(t){var e=t.txGroup,n=t.pool;return{txns:e,txnFees:at(e),groupID:ot(e),lsig:n.account.lsig}})),e.next=5,a(o.map((function(t){return t.txns})));case 5:return i=e.sent,u=Promise.all(o.map((function(e,n){return new Promise(function(){var s=I(m().mark((function s(a,o){var u,c,p,l,d,f;return m().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,u=e.txns.map((function(r,s){return 0===s?i[n]:t.signLogicSigTransactionObject(r.txn,e.lsig).blob})),s.next=4,rt(r,[u]);case 4:c=s.sent,p=O(c,1),l=p[0],d=l.txnID,f=l.confirmedRound,a({fees:e.txnFees,groupID:e.groupID,txnID:d,confirmedRound:f}),s.next=15;break;case 12:s.prev=12,s.t0=s.catch(0),o(s.t0);case 15:case"end":return s.stop()}}),s,null,[[0,12]])})));return function(t,e){return s.apply(this,arguments)}}())}))),e.abrupt("return",u);case 10:throw e.prev=10,e.t0=e.catch(1),new X(e.t0,"We encountered something unexpected while redeeming. Try again later.");case 13:case"end":return e.stop()}}),e,null,[[1,10]])}))),ur.apply(this,arguments)}function cr(){return(cr=I(m().mark((function e(r){var s,a,o,i,u,c,p,l,d,f,g;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=r.client,a=r.pool,o=r.assetID,i=r.assetOut,u=r.initiatorAddr,e.next=3,s.getTransactionParams().do();case 3:return c=e.sent,p=a.account.address(),l=t.makeApplicationNoOpTxnFromObject({from:p,appIndex:a.validatorAppID,appArgs:[ut("redeem")],note:Tt.getAppCallTxnNoteWithClientName(a.contractVersion),accounts:[u],foreignAssets:0==a.asset2ID?[a.asset1ID,a.poolTokenID]:[a.asset1ID,a.asset2ID,a.poolTokenID],suggestedParams:c}),d=0===o?t.makePaymentTxnWithSuggestedParamsFromObject({from:p,to:u,amount:BigInt(i),suggestedParams:c}):t.makeAssetTransferTxnWithSuggestedParamsFromObject({from:p,to:u,assetIndex:o,amount:BigInt(i),suggestedParams:c}),f=t.makePaymentTxnWithSuggestedParamsFromObject({from:u,to:p,amount:l.fee+d.fee,note:n,suggestedParams:c}),g=t.assignGroupID([f,l,d]),e.abrupt("return",[{txn:g[0],signers:[u]},{txn:g[1],signers:[p]},{txn:g[2],signers:[p]}]);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pr(e){var n=e.suggestedParams,r=e.stakingAppID,s=e.initiatorAddr,a=e.liquidityAssetID,o=e.program,i=e.amount,u=t.encodeUint64(i),c=t.encodeUint64(o.id);return t.makeApplicationNoOpTxnFromObject({appIndex:r,from:s,suggestedParams:n,foreignAssets:[a],accounts:[o.accountAddress],appArgs:[ut("commit"),u],note:V([ut("tinymanStaking/v1:b"),c,t.encodeUint64(a),u])})}function lr(){return(lr=I(m().mark((function e(n){var r,s,a,o,i,u,c,p,l,d,f;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.client,s=n.stakingAppID,a=n.program,o=n.requiredAssetID,i=n.liquidityAssetID,u=n.amount,c=n.initiatorAddr,e.next=3,r.getTransactionParams().do();case 3:if(p=e.sent,l=pr({suggestedParams:p,stakingAppID:s,program:a,liquidityAssetID:i,initiatorAddr:c,amount:u}),d=[l],"number"!=typeof o){e.next=10;break}return f=t.makeApplicationNoOpTxnFromObject({appIndex:s,from:c,suggestedParams:p,foreignAssets:[o],accounts:[a.accountAddress],appArgs:[ut("log_balance")]}),d=t.assignGroupID([l,f]),e.abrupt("return",[{txn:d[0],signers:[c]},{txn:d[1],signers:[c]}]);case 10:return e.abrupt("return",[{txn:d[0],signers:[c]}]);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}exports.ALGO_ASSET=pt,exports.ALGO_ASSET_ID=ct,exports.ASSET_OPT_IN_PROCESS_TXN_COUNT=1,exports.AddLiquidity=an,exports.BASE_MINIMUM_BALANCE=r,exports.Bootstrap=Ne,exports.CONTRACT_VERSION=At,exports.MINIMUM_ADD_LIQUIDITY_AMOUNT=p,exports.MINIMUM_BALANCE_REQUIRED_PER_APP=a,exports.MINIMUM_BALANCE_REQUIRED_PER_ASSET=s,exports.MINIMUM_BALANCE_REQUIRED_PER_BYTE_SCHEMA=u,exports.MINIMUM_BALANCE_REQUIRED_PER_INT_SCHEMA_VALUE=c,exports.OPT_IN_VALIDATOR_APP_PROCESS_TXN_COUNT=1,exports.OPT_OUT_VALIDATOR_APP_PROCESS_TXN_COUNT=1,exports.POOL_TOKEN_UNIT_NAME=lt,exports.PoolStatus=Xt,exports.REDEEM_PROCESS_TXN_COUNT=3,exports.RemoveLiquidity=Cn,exports.Swap=sr,exports.SwapType=xn,exports.V1_1AddLiquidityTxnIndices=Pe,exports.V1_1_ADD_LIQUIDITY_PROCESS_TXN_COUNT=5,exports.V1_1_REMOVE_LIQUIDITY_TXN_COUNT=un,exports.V2AddLiquidityTxnIndices=Fe,exports.V2AddLiquidityType=Le,exports.V2_REMOVE_LIQUIDITY_APP_CALL_INNER_TXN_COUNT=cn,exports.applySlippageToAmount=H,exports.calculateAccountMinimumRequiredBalance=Lt,exports.combineAndRegroupSignerTxns=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var s=n.flat(),a=s.map((function(e){var n=e.txn;return n.group=void 0,t.decodeUnsignedTransaction(t.encodeUnsignedTransaction(n))})),o=t.assignGroupID(a);return s.map((function(t,e){return f(f({},t),{},{txn:o[e]})}))},exports.convertFromBaseUnits=Z,exports.convertToBaseUnits=$,exports.generateOptIntoAssetTxns=function(t){return dt.apply(this,arguments)},exports.generateOptIntoValidatorTxns=function(t){return _t.apply(this,arguments)},exports.generateOptOutOfValidatorTxns=function(t){return wt.apply(this,arguments)},exports.generateRedeemTxns=function(t){return cr.apply(this,arguments)},exports.getAccountExcess=function(t){return Mt.apply(this,arguments)},exports.getAccountExcessWithinPool=Bt,exports.getAccountInformation=Pt,exports.getAddLiquidityTotalFee=function(e){switch(e.version){case At.V1_1:return ke;case At.V2:return n=e.type,(Be[n]+Re[n])*t.ALGORAND_MIN_TX_FEE;default:throw new Error("Provided contract version was not valid.")}var n},exports.getMinRequiredBalanceToOptIn=function(t){var e,n=t.currentMinumumBalanceForAccount,r=t.suggestedTransactionFee;if("app-opt-in"===t.type){var o=Nt(t.contractVersion);e=a+o.schema.numLocalByteSlices*u+o.schema.numLocalInts*c}else e=s;return e+(n||0)+(r||0)},exports.getStakingAppID=function(t){return"testnet"===t?51948952:649588853},exports.getSwapTotalFee=function(e){switch(e.version){case At.V1_1:return $n;case At.V2:return n=e.type,(Tn[n]+vn)*t.ALGORAND_MIN_TX_FEE;default:throw new Error("Provided contract version was not valid.")}var n},exports.getTxnGroupID=ot,exports.getValidatorAppID=yt,exports.hasSufficientMinimumBalance=function(t){return t.amount>=t.minimum_required_balance},exports.isAccountOptedIntoApp=function(t){var e=t.appID;return t.accountAppsLocalState.some((function(t){return t.id===e}))},exports.poolUtils=re,exports.prepareCommitTransactions=function(t){return lr.apply(this,arguments)},exports.redeemAllExcessAsset=function(t){return ur.apply(this,arguments)},exports.redeemExcessAsset=function(t){return ar.apply(this,arguments)},exports.sendAndWaitRawTransaction=rt,exports.sumUpTxnFees=at,exports.tinymanContract_v1_1=bt,exports.tinymanContract_v2=Ot,exports.tinymanJSSDKConfig=Tt;
